/*! For license information please see main.dde57b83.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,E=60106,S=60107,_=60108,I=60114,T=60109,C=60110,N=60112,D=60113,A=60120,L=60115,O=60116,P=60121,R=60128,M=60129,F=60130,V=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),E=j("react.portal"),S=j("react.fragment"),_=j("react.strict_mode"),I=j("react.profiler"),T=j("react.provider"),C=j("react.context"),N=j("react.forward_ref"),D=j("react.suspense"),A=j("react.suspense_list"),L=j("react.memo"),O=j("react.lazy"),P=j("react.block"),j("react.scope"),R=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),V=j("react.legacy_hidden")}var U,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case I:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case L:return H(e.type);case P:return H(e._render);case O:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ie(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ce=null,Ne=null;function De(e){if(e=ri(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Te(e.stateNode,e.type,t))}}function Ae(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Le(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}function Oe(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function Re(){}var Me=Oe,Fe=!1,Ve=!1;function je(){null===Ce&&null===Ne||(Re(),Le())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,Ge=null,We=!1,He=null,Qe={onError:function(e){Ke=!0,Ge=e}};function Ye(e,t,n,r,i,a,o,u,s){Ke=!1,Ge=null,ze.apply(Qe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function xt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&wt(ut,e),null!==st&&wt(st,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},_t={},It={};function Tt(e){if(_t[e])return _t[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in It)return _t[e]=n[t];return e}f&&(It=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var Ct=Tt("animationend"),Nt=Tt("animationiteration"),Dt=Tt("animationstart"),At=Tt("transitionend"),Lt=new Map,Ot=new Map,Pt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",Dt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Lt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Vt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Bt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Wt|0)|0},Gt=Math.log,Wt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function $t(e,t,n,r){Fe||Re();var i=Jt,a=Fe;Fe=!0;try{Pe(i,e,t,n,r)}finally{(Fe=a)||je()}}function Xt(e,t,n,r){Qt(Ht,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Rr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Ie(r);if(null!==(i=ni(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Rr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),bn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(wn),En=sn(i({},hn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Cn(){return Tn}var Nn=i({},pn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=sn(Nn),An=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Vn=null;f&&"documentMode"in document&&(Vn=document.documentMode);var jn=f&&"TextEvent"in window&&!Vn,Un=f&&(!Fn||Vn&&8<Vn&&11>=Vn),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Qn(e,t,n,r){Ae(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,$n=null;function Xn(e){Nr(e,0)}function Jn(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),$n=Yn=null)}function ar(e){if("value"===e.propertyName&&Jn($n)){var t=[];if(Qn(t,$n,e,Ie(e)),e=Xn,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),$n=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn($n)}function sr(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,xr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Fr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Pt,2);for(var Sr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_r=0;_r<Sr.length;_r++)Ot.set(Sr[_r],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=Ge;Ke=!1,Ge=null,We||(We=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(We)throw e=He,We=!1,He=null,e}function Dr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Lr(e){e[Ar]||(e[Ar]=!0,u.forEach((function(t){Tr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Pr(a,e,i,t),o.add(u))}function Pr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ve)return e(t,n);Ve=!0;try{Me(e,t,n)}finally{Ve=!1,je()}}((function(){var r=a,i=Ie(n),o=[];e:{var u=Lt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Dn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Ln;break;case Ct:case Nt:case Dt:s=bn;break;case At:s=On;break;case"scroll":s=vn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ue(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Vr(d))p++;for(d=0,v=h;v;v=Vr(v))d++;for(;0<p-d;)l=Vr(l),p--;for(;0<d-p;)h=Vr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Vr(l),h=Vr(h)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Hn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(kr=m,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Er(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Er(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Un&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Gn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Gn=!0)),0<(m=Fr(r,k)).length&&(k=new En(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ue(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ue(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ue(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Ue(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Jr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var Ei=null,Si=null,_i=a.unstable_runWithPriority,Ii=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Di=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Li=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Pi=a.unstable_NormalPriority,Ri=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Vi=void 0!==Ni?Ni:function(){},ji=null,Ui=null,Bi=!1,qi=Di(),zi=1e4>qi?Di:function(){return Di()-qi};function Ki(){switch(Ai()){case Li:return 99;case Oi:return 98;case Pi:return 97;case Ri:return 96;case Mi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Li;case 98:return Oi;case 97:return Pi;case 96:return Ri;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Gi(e),_i(e,t)}function Hi(e,t,n){return e=Gi(e),Ii(e,t,n)}function Qi(){if(null!==Ui){var e=Ui;Ui=null,Ti(e)}Yi()}function Yi(){if(!Bi&&null!==ji){Bi=!0;var e=0;try{var t=ji;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ii(Li,Qi),n}finally{Bi=!1}}}var $i=w.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function Ea(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Sa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function _a(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=$s(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ea(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=Ea(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$s(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=Ea(e,null,t),n.return=e,n;case E:return(t=Xs(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Sa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===S?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);Sa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===S?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Sa(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===S&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===S){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ea(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===S?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=Ea(e,r,a),s.return=e,e=s)}return u(e);case E:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$s(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&Sa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ia=_a(!0),Ta=_a(!1),Ca={},Na=ci(Ca),Da=ci(Ca),Aa=ci(Ca);function La(e){if(e===Ca)throw Error(o(174));return e}function Oa(e,t){switch(fi(Aa,t),fi(Da,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Pa(){li(Na),li(Da),li(Aa)}function Ra(e){La(Aa.current);var t=La(Na.current),n=pe(t,e.type);t!==n&&(fi(Da,e),fi(Na,n))}function Ma(e){Da.current===e&&(li(Na),li(Da))}var Fa=ci(0);function Va(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Ua=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=Ua;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(ja=e);qa(ja,n)}ja=e,Ua=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,ja=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Wa(e){if(e!==ja)return!1;if(!Ba)return Ga(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Ua;t;)qa(e,t),t=Qr(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ua=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ua=null}}else Ua=ja?Qr(e.stateNode.nextSibling):null;return!0}function Ha(){Ua=ja=null,Ba=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var $a=w.ReactCurrentDispatcher,Xa=w.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Oo:Po,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Ro,e=n(r,i)}while(ro)}if($a.current=Lo,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ou;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=$a.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ao.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ao.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function bo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function xo(e,t){return bo(516,4,e,t)}function Eo(e,t){return wo(516,4,e,t)}function So(e,t){return wo(4,2,e,t)}function _o(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Io(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,_o.bind(null,t,e),n)}function To(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Do(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Ao(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Lo={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,_o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ao.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:To,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Do.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return yo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:Io,useLayoutEffect:So,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Eo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:Io,useLayoutEffect:So,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:To,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return Eo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function Vo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):Ia(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Vo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Uo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ws(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Vo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Vo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Go(e,t,n,r,i){if(mi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ba(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Xi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ba(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ia(t,e.child,null,a),t.child=Ia(t,null,u,a)):Vo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Qo,Yo,$o,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ws(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ws(o,u),null!==e?r=Ws(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Vo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Va(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Va(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Pa(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=La(Aa.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=La(Na.current),Wa(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Jr]=t,r[Zr]=u,n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(e=0;e<Ir.length;e++)Dr(Ir[e],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":ee(r,u),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Dr("invalid",r);break;case"textarea":se(r,u),Dr("invalid",r)}for(var c in Se(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Dr("scroll",r));switch(n){case"input":$(r),re(r,u,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=_e(n,r),n){case"dialog":Dr("cancel",e),Dr("close",e),a=r;break;case"iframe":case"object":case"embed":Dr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ir.length;a++)Dr(Ir[a],e);a=r;break;case"source":Dr("error",e),a=r;break;case"img":case"image":case"link":Dr("error",e),Dr("load",e),a=r;break;case"details":Dr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Dr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Dr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Dr("invalid",e);break;default:a=r}Se(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Dr("scroll",e):null!=f&&b(e,u,f,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Ur)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=La(Aa.current),La(Na.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Vu&&(Vu=3):(0!==Vu&&3!==Vu||(Vu=4),null===Ou||0===(134217727&Bu)&&0===(134217727&qu)||gs(Ou,Ru))),(r||n)&&(t.flags|=4),null);case 4:return Pa(),null===e&&Lr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Vu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Va(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Wu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Va(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return Es(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Pa(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Pa(),null;case 10:return ra(e),null;case 23:case 24:return Es(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,La(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(f in Se(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Dr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===R?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$u||($u=!0,Xu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ju?Ju=new Set([this]):Ju.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Us(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Si&&"function"===typeof Si.onCommitFiberUnmount)try{Si.onCommitFiberUnmount(Ei,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){Us(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Us(t,a)}break;case 5:vu(t);break;case 4:_u(e,t)}}function bu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function wu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(wu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Eu(e,n,t):Su(e,n,t)}function Eu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Eu(e,t,n),e=e.sibling;null!==e;)Eu(e,t,n),e=e.sibling}function Su(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Su(e,t,n),e=e.sibling;null!==e;)Su(e,t,n),e=e.sibling}function _u(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Iu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),_e(e,i),t=_e(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):b(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gu=zi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Du=w.ReactCurrentDispatcher,Au=w.ReactCurrentOwner,Lu=0,Ou=null,Pu=null,Ru=0,Mu=0,Fu=ci(0),Vu=0,ju=null,Uu=0,Bu=0,qu=0,zu=0,Ku=null,Gu=0,Wu=1/0;function Hu(){Wu=zi()+500}var Qu,Yu=null,$u=!1,Xu=null,Ju=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Lu)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=Uu),0!==$i.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Lu)&&98===e?e=Ut(12,ss):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ou&&(qu|=t,4===Vu&&gs(e,Ru));var r=Ki();1===t?0!==(8&Lu)&&0===(48&Lu)?ks(e):(ys(e,n),0===Lu&&(Hu(),Qi())):(0===(4&Lu)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Vt(e,e===Ou?Ru:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ti(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Ui=Ii(Li,Yi)):ji.push(n),n=Fi):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Lu))throw Error(o(327));var t=e.callbackNode;if(Rs()&&e.callbackNode!==t)return null;var n=Vt(e,e===Ou?Ru:0);if(0===n)return null;var r=n,i=Lu;Lu|=16;var a=Is();for(Ou===e&&Ru===r||(Hu(),Ss(e,r));;)try{Ns();break}catch(s){_s(e,s)}if(na(),Du.current=a,Lu=i,null!==Pu?r=0:(Ou=null,Ru=0,r=Vu),0!==(Uu&qu))Ss(e,0);else if(0!==r){if(2===r&&(Lu|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=jt(e))&&(r=Ts(e,n))),1===r)throw t=ju,Ss(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ls(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Gu+500-zi())){if(0!==Vt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Ls.bind(null,e),r);break}Ls(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Gr(Ls.bind(null,e),n);break}Ls(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Lu))throw Error(o(327));if(Rs(),e===Ou&&0!==(e.expiredLanes&Ru)){var t=Ru,n=Ts(e,t);0!==(Uu&qu)&&(n=Ts(e,t=Vt(e,t)))}else n=Ts(e,t=Vt(e,0));if(0!==e.tag&&2===n&&(Lu|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=jt(e))&&(n=Ts(e,t))),1===n)throw n=ju,Ss(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ls(e),ys(e,zi()),null}function bs(e,t){var n=Lu;Lu|=1;try{return e(t)}finally{0===(Lu=n)&&(Hu(),Qi())}}function ws(e,t){var n=Lu;Lu&=-2,Lu|=8;try{return e(t)}finally{0===(Lu=n)&&(Hu(),Qi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,Uu|=t}function Es(){Mu=Fu.current,li(Fu)}function Ss(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Pa(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Pa();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:Es()}n=n.return}Ou=e,Pu=Ws(e.current,null),Ru=Mu=Uu=t,Vu=0,ju=null,zu=qu=Bu=0}function _s(e,t){for(;;){var n=Pu;try{if(na(),$a.current=Lo,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,Au.current=null,null===n||null===n.return){Vu=1,ju=t,Pu=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Ru,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var b=Bs.bind(null,a,c,u);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Vu&&(Vu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var w=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ju||!Ju.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}As(n)}catch(E){t=E,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function Is(){var e=Du.current;return Du.current=Lo,null===e?Lo:e}function Ts(e,t){var n=Lu;Lu|=16;var r=Is();for(Ou===e&&Ru===t||Ss(e,t);;)try{Cs();break}catch(i){_s(e,i)}if(na(),Lu=n,Du.current=r,null!==Pu)throw Error(o(261));return Ou=null,Ru=0,Vu}function Cs(){for(;null!==Pu;)Ds(Pu)}function Ns(){for(;null!==Pu&&!Ci();)Ds(Pu)}function Ds(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?As(e):Pu=t,Au.current=null}function As(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Pu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Pu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Vu&&(Vu=5)}function Ls(e){var t=Ki();return Wi(99,Os.bind(null,e,t)),null}function Os(e,t){do{Rs()}while(null!==es);if(0!==(48&Lu))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ou&&(Pu=Ou=null,Ru=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Lu,Lu|=32,Au.current=null,Br=Yt,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(I){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Ps()}catch(I){if(null===Yu)throw Error(o(330));Us(Yu,I),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ge(Yu.stateNode,""),128&k){var b=Yu.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:xu(Yu),Yu.flags&=-3;break;case 6:xu(Yu),Yu.flags&=-3,Iu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Iu(Yu.alternate,Yu);break;case 4:Iu(Yu.alternate,Yu);break;case 8:_u(u,s=Yu);var x=s.alternate;bu(s),null!==x&&bu(x)}Yu=Yu.nextEffect}}catch(I){if(null===Yu)throw Error(o(330));Us(Yu,I),Yu=Yu.nextEffect}}while(null!==Yu);if(w=qr,b=yr(),k=w.focusedElem,u=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(b=u.start,void 0===(w=u.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!w.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),x>u?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!Br,qr=Br=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var E=Yu.flags;if(36&E&&mu(k,Yu.alternate,Yu),128&E){b=void 0;var S=Yu.ref;if(null!==S){var _=Yu.stateNode;Yu.tag,b=_,"function"===typeof S?S(b):S.current=b}}Yu=Yu.nextEffect}}catch(I){if(null===Yu)throw Error(o(330));Us(Yu,I),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Vi(),Lu=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((E=Yu).sibling=null,E.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&(Ju=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Si&&"function"===typeof Si.onCommitFiberRoot)try{Si.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(I){}if(ys(e,zi()),$u)throw $u=!1,e=Xu,Xu=null,e;return 0!==(8&Lu)||Qi(),null}function Ps(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&yu(e,Yu),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Rs(),null}))),Yu=Yu.nextEffect}}function Rs(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Wi(e,Vs)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Rs(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Rs(),null})))}function Vs(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Lu))throw Error(o(331));var t=Lu;Lu|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Us(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Us(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Lu=t,Qi(),!0}function js(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function Us(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ou===e&&(Ru&n)===n&&(4===Vu||3===Vu&&(62914560&Ru)===Ru&&500>zi()-Gu?Ss(e,0):zu|=n),ys(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=Uu),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Gs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case S:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case _:u=8,i|=1;break;case I:return(e=Ks(12,n,t,8|i)).elementType=I,e.type=I,e.lanes=a,e;case D:return(e=Ks(13,n,t,i)).type=D,e.elementType=D,e.lanes=a,e;case A:return(e=Ks(19,n,t,i)).elementType=A,e.lanes=a,e;case F:return Ys(n,i,a,t);case V:return(e=Ks(24,n,t,i)).elementType=V,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case N:u=11;break e;case L:u=14;break e;case O:u=16,r=null;break e;case P:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function $s(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Xs(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Js(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=bi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Js(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Lr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ws((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:Ra(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Vo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Gs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===L)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Go(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Uo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Go(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ua=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Vo(e,t,r,n),Ha();t=t.child}return t;case 5:return Ra(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Vo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Jo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ia(t,null,r,n):Vo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Ji,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Vo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Vo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Uo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bs,Pe=function(e,t,n,r,i){var a=Lu;Lu|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Lu=a)&&(Hu(),Qi())}},Re=function(){0===(49&Lu)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Rs())},Me=function(e,t){var n=Lu;Lu|=2;try{return e(t)}finally{0===(Lu=n)&&(Hu(),Qi())}};var sc={Events:[ri,ii,ai,Ae,Le,Rs,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Ei=fc.inject(lc),Si=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Lu;if(0!==(48&n))return e(t);Lu|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Lu=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(ws((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bs,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:b.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var _=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+I(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(_,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+I(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+I(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var D={current:null};function A(){var e=D.current;if(null===e)throw Error(d(321));return e}var L={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var x=g.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<_(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>_(o,n))void 0!==s&&0>_(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>_(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function _(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],T=[],C=1,N=null,D=3,A=!1,L=!1,O=!1;function P(e){for(var t=E(T);null!==t;){if(null===t.callback)S(T);else{if(!(t.startTime<=e))break;S(T),t.sortIndex=t.expirationTime,x(I,t)}t=E(T)}}function R(e){if(O=!1,P(e),!L)if(null!==E(I))L=!0,n(M);else{var t=E(T);null!==t&&r(R,t.startTime-e)}}function M(e,n){L=!1,O&&(O=!1,i()),A=!0;var a=D;try{for(P(n),N=E(I);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,D=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===E(I)&&S(I),P(n)}else S(I);N=E(I)}if(null!==N)var s=!0;else{var c=E(T);null!==c&&r(R,c.startTime-n),s=!1}return s}finally{N=null,D=a,A=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||A||(L=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return E(I)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(T,e),null===E(I)&&e===E(T)&&(O?i():O=!0,r(R,o-u))):(e.sortIndex=s,x(I,e),L||A||(L=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},248:function(e,t,n){"use strict";e.exports=n.p+"static/media/campaign-creators-OGOWDVLbMSc-unsplash.251cefad5972bb2bac55.jpg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".74426605.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="offerandcoupons:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkofferandcoupons=self.webpackChunkofferandcoupons||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return _e},SDK_VERSION:function(){return kt},_DEFAULT_ENTRY_NAME:function(){return ot},_addComponent:function(){return lt},_addOrOverwriteComponent:function(){return ft},_apps:function(){return st},_clearComponents:function(){return vt},_components:function(){return ct},_getProvider:function(){return dt},_registerComponent:function(){return ht},_removeServiceInstance:function(){return pt},deleteApp:function(){return Et},getApp:function(){return wt},getApps:function(){return xt},initializeApp:function(){return bt},onLog:function(){return It},registerVersion:function(){return _t},setLogLevel:function(){return Tt}});var t,r=n(791),i=n(164);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var c=function(e){return e};var l="beforeunload",f="popstate";function h(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=m(r.location.hash.substr(1)),t=e.pathname,n=void 0===t?"/":t,a=e.search,o=void 0===a?"":a,u=e.hash,s=void 0===u?"":u,l=i.state||{};return[l.idx,c({pathname:n,search:o,hash:s,state:l.usr||null,key:l.key||"default"})]}var o=null;function u(){if(o)x.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(x.length){if(null!=r){var u=k-r;u&&(o={action:e,location:i,retry:function(){C(-1*u)}},C(u))}}else T(e)}}r.addEventListener(f,u),r.addEventListener("hashchange",(function(){y(a()[1])!==y(b)&&u()}));var h=t.Pop,g=a(),k=g[0],b=g[1],w=p(),x=p();function E(e){return function(){var e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){var n=r.location.href,i=n.indexOf("#");t=-1===i?n:n.slice(0,i)}return t}()+"#"+("string"===typeof e?e:y(e))}function S(e,t){return void 0===t&&(t=null),c(s({pathname:b.pathname,hash:"",search:""},"string"===typeof e?m(e):e,{state:t,key:v()}))}function _(e,t){return[{usr:e.state,key:e.key,idx:t},E(e)]}function I(e,t,n){return!x.length||(x.call({action:e,location:t,retry:n}),!1)}function T(e){h=e;var t=a();k=t[0],b=t[1],w.call({action:h,location:b})}function C(e){i.go(e)}null==k&&(k=0,i.replaceState(s({},i.state,{idx:k}),""));var N={get action(){return h},get location(){return b},createHref:E,push:function e(n,a){var o=t.Push,u=S(n,a);if(I(o,u,(function(){e(n,a)}))){var s=_(u,k+1),c=s[0],l=s[1];try{i.pushState(c,"",l)}catch(f){r.location.assign(l)}T(o)}},replace:function e(n,r){var a=t.Replace,o=S(n,r);if(I(a,o,(function(){e(n,r)}))){var u=_(o,k),s=u[0],c=u[1];i.replaceState(s,"",c),T(a)}},go:C,back:function(){C(-1)},forward:function(){C(1)},listen:function(e){return w.push(e)},block:function(e){var t=x.push(e);return 1===x.length&&r.addEventListener(l,d),function(){t(),x.length||r.removeEventListener(l,d)}}};return N}function d(e){e.preventDefault(),e.returnValue=""}function p(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function v(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function m(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,t){if(!e)throw new Error(t)}var k=(0,r.createContext)(null);var b=(0,r.createContext)(null);var w=(0,r.createContext)({outlet:null,matches:[]});function x(e){g(!1)}function E(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;I()&&g(!1);var d=B(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=m(u));var v=u,y=v.pathname,w=void 0===y?"/":y,x=v.search,E=void 0===x?"":x,S=v.hash,_=void 0===S?"":S,T=v.state,C=void 0===T?null:T,N=v.key,D=void 0===N?"default":N,A=(0,r.useMemo)((function(){var e=j(w,d);return null==e?null:{pathname:e,search:E,hash:_,state:C,key:D}}),[d,w,E,_,C,D]);return null==A?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(b.Provider,{children:o,value:{location:A,navigationType:c}}))}function S(e){var t=e.children,n=e.location;return function(e,t){I()||g(!1);var n=(0,r.useContext)(w).matches,i=n[n.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var u,s=T();if(t){var c,l="string"===typeof t?m(t):t;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||g(!1),u=l}else u=s;var f=u.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=j(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;var i=A(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=R(i[o],r);return a}(e,{pathname:h});0;return M(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:U([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:U([o,e.pathnameBase])})})),n)}(D(t),n)}function _(e){I()||g(!1);var t=(0,r.useContext)(k),n=t.basename,i=t.navigator,a=N(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?m(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):U([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function I(){return null!=(0,r.useContext)(b)}function T(){return I()||g(!1),(0,r.useContext)(b).location}function C(){I()||g(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(w).matches,a=T().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=V(e,JSON.parse(o),a);"/"!==t&&(i.pathname=U([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function N(e){var t=(0,r.useContext)(w).matches,n=T().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return V(e,JSON.parse(i),n)}),[e,i,n])}function D(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==x&&g(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=D(e.props.children)),t.push(n)}else t.push.apply(t,D(e.props.children))})),t}function A(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||g(!1),a.relativePath=a.relativePath.slice(r.length));var o=U([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&g(!1),A(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:P(o,e.index),routesMeta:u})})),t}var L=/^:\w+$/,O=function(e){return"*"===e};function P(e,t){var n=e.split("/"),r=n.length;return n.some(O)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!O(e)})).reduce((function(e,t){return e+(L.test(t)?3:""===t?1:10)}),r)}function R(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=F({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:U([i,l.pathname]),pathnameBase:B(U([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=U([i,l.pathnameBase]))}return a}function M(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(w.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],c=s.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:s,pathnameBase:c,pattern:e}}function V(e,t,n){var r,i="string"===typeof e?m(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?m(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:q(a),hash:z(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var U=function(e){return e.join("/").replace(/\/\/+/g,"/")},B=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},q=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},z=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var W=["onClick","reloadDocument","replace","state","target","to"];function H(e){var t=e.basename,n=e.children,i=e.window,a=(0,r.useRef)();null==a.current&&(a.current=h({window:i}));var o=a.current,s=u((0,r.useState)({action:o.action,location:o.location}),2),c=s[0],l=s[1];return(0,r.useLayoutEffect)((function(){return o.listen(l)}),[o]),(0,r.createElement)(E,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o})}var Q=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=G(e,W),f=_(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=C(),s=T(),c=N(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||y(s)===y(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",K({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));function Y(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Y(a,r,i,o,u,"next",e)}function u(e){Y(a,r,i,o,u,"throw",e)}o(void 0)}))}}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=n(757),te=n.n(ee);function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ae(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){return ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ue(e,t)}function se(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function he(e,t){if(t&&("object"===fe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function de(e){var t=le();return function(){var n,r=ce(e);if(t){var i=ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return he(this,n)}}function pe(e,t,n){return pe=le()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ue(i,n.prototype),i},pe.apply(null,arguments)}function ve(e){var t="function"===typeof Map?new Map:void 0;return ve=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return pe(e,arguments,ce(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ue(n,e)},ve(e)}var ye=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ye(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ge=function(e){return function(e){var t=ye(e);return me.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function ke(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ke(e[n],t[n]));return e}var be=function(){function e(){var t=this;ne(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ie(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function we(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(a)),""].join(".")}function xe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ee(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Se(){return"object"===typeof indexedDB}var _e=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(oe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(oe(a),Ie.prototype.create),a}return ie(n)}(ve(Error)),Ie=function(){function e(t,n,r){ne(this,e),this.service=t,this.serviceName=n,this.errors=r}return ie(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Te(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new _e(n,a,t);return o}}]),e}();function Te(e,t){return e.replace(Ce,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ce=/\{\$([^}]+)}/g;function Ne(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function De(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ae(u)&&Ae(s)){if(!De(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ae(e){return null!==e&&"object"===typeof e}function Le(e,t){var n=new Oe(e,t);return n.subscribe.bind(n)}var Oe=function(){function e(t,n){var r=this;ne(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ie(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ae(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Pe),void 0===r.error&&(r.error=Pe),void 0===r.complete&&(r.complete=Pe);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Pe(){}function Re(e){return e&&e._delegate?e._delegate:e}function Me(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var Fe=function(){function e(t){ne(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return ie(e,[{key:"transaction",value:function(e,t){return new Ve(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new je(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),Ve=function(){function e(t){var n=this;ne(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return ie(e,[{key:"objectStore",value:function(e){return new je(this._transaction.objectStore(e))}}]),e}(),je=function(){function e(t){ne(this,e),this._store=t}return ie(e,[{key:"index",value:function(e){return new Ue(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new Ue(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return Me(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return Me(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return Me(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return Me(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),Ue=function(){function e(t){ne(this,e),this._index=t}return ie(e,[{key:"get",value:function(e){return Me(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function Be(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qe=function(){function e(t,n,r){ne(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ie(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ze="[DEFAULT]",Ke=function(){function e(t,n){ne(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ie(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new be;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ze})}catch(c){}var t,n=ae(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=$(ee.mark((function e(){var t;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Be(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Be(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ae(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(mv){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ze?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(mv){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze;return this.component?this.component.multipleInstances?e:ze:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ge,We,He=function(){function e(t){ne(this,e),this.name=t,this.providers=new Map}return ie(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ke(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Qe=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(We||(We={}));var Ye,$e,Xe={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},Je=We.INFO,Ze=(X(Ge={},We.DEBUG,"log"),X(Ge,We.VERBOSE,"log"),X(Ge,We.INFO,"info"),X(Ge,We.WARN,"warn"),X(Ge,We.ERROR,"error"),Ge),et=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ze[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},tt=function(){function e(t){ne(this,e),this.name=t,this._logLevel=Je,this._logHandler=et,this._userLogHandler=null,Qe.push(this)}return ie(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in We))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Xe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.DEBUG].concat(t)),this._logHandler.apply(this,[this,We.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.VERBOSE].concat(t)),this._logHandler.apply(this,[this,We.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.INFO].concat(t)),this._logHandler.apply(this,[this,We.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.WARN].concat(t)),this._logHandler.apply(this,[this,We.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.ERROR].concat(t)),this._logHandler.apply(this,[this,We.ERROR].concat(t))}}]),e}();var nt=function(){function e(t){ne(this,e),this.container=t}return ie(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var rt="@firebase/app",it="0.7.20",at=new tt("@firebase/app"),ot="[DEFAULT]",ut=(X(Ye={},rt,"fire-core"),X(Ye,"@firebase/app-compat","fire-core-compat"),X(Ye,"@firebase/analytics","fire-analytics"),X(Ye,"@firebase/analytics-compat","fire-analytics-compat"),X(Ye,"@firebase/app-check","fire-app-check"),X(Ye,"@firebase/app-check-compat","fire-app-check-compat"),X(Ye,"@firebase/auth","fire-auth"),X(Ye,"@firebase/auth-compat","fire-auth-compat"),X(Ye,"@firebase/database","fire-rtdb"),X(Ye,"@firebase/database-compat","fire-rtdb-compat"),X(Ye,"@firebase/functions","fire-fn"),X(Ye,"@firebase/functions-compat","fire-fn-compat"),X(Ye,"@firebase/installations","fire-iid"),X(Ye,"@firebase/installations-compat","fire-iid-compat"),X(Ye,"@firebase/messaging","fire-fcm"),X(Ye,"@firebase/messaging-compat","fire-fcm-compat"),X(Ye,"@firebase/performance","fire-perf"),X(Ye,"@firebase/performance-compat","fire-perf-compat"),X(Ye,"@firebase/remote-config","fire-rc"),X(Ye,"@firebase/remote-config-compat","fire-rc-compat"),X(Ye,"@firebase/storage","fire-gcs"),X(Ye,"@firebase/storage-compat","fire-gcs-compat"),X(Ye,"@firebase/firestore","fire-fst"),X(Ye,"@firebase/firestore-compat","fire-fst-compat"),X(Ye,"fire-js","fire-js"),X(Ye,"firebase","fire-js-all"),Ye),st=new Map,ct=new Map;function lt(e,t){try{e.container.addComponent(t)}catch(n){at.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ft(e,t){e.container.addOrOverwriteComponent(t)}function ht(e){var t=e.name;if(ct.has(t))return at.debug("There were multiple attempts to register component ".concat(t,".")),!1;ct.set(t,e);var n,r=ae(st.values());try{for(r.s();!(n=r.n()).done;){lt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function dt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot;dt(e,t).clearInstance(n)}function vt(){ct.clear()}var yt=(X($e={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),X($e,"bad-app-name","Illegal App name: '{$appName}"),X($e,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),X($e,"app-deleted","Firebase App named '{$appName}' already deleted"),X($e,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),X($e,"invalid-log-argument","First argument to `onLog` must be null or a function."),X($e,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),X($e,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),X($e,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),X($e,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),$e),mt=new Ie("app","Firebase",yt),gt=function(){function e(t,n,r){var i=this;ne(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qe("app",(function(){return i}),"PUBLIC"))}return ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}]),e}(),kt="9.6.10";function bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ot,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw mt.create("bad-app-name",{appName:String(i)});var a=st.get(i);if(a){if(De(e,a.options)&&De(r,a.config))return a;throw mt.create("duplicate-app",{appName:i})}var o,u=new He(i),s=ae(ct.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new gt(e,r,u);return st.set(i,l),l}function wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=st.get(e);if(!t)throw mt.create("no-app",{appName:e});return t}function xt(){return Array.from(st.values())}function Et(e){return St.apply(this,arguments)}function St(){return(St=$(ee.mark((function e(t){var n;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!st.has(n)){e.next=6;break}return st.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t,n){var r,i=null!==(r=ut[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void at.warn(u.join(" "))}ht(new qe("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function It(e,t){if(null!==e&&"function"!==typeof e)throw mt.create("invalid-log-argument");!function(e,t){var n,r=ae(Qe);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Xe[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:We[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Tt(e){var t;t=e,Qe.forEach((function(e){e.setLogLevel(t)}))}var Ct="firebase-heartbeat-store",Nt=null;function Dt(){var e,t,n;return Nt||(Nt=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(Ct)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new Fe(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new Fe(a.result),e.oldVersion,e.newVersion,new Ve(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw mt.create("storage-open",{originalErrorMessage:e.message})}))),Nt}function At(e){return Lt.apply(this,arguments)}function Lt(){return Lt=$(ee.mark((function e(t){var n;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Ct).objectStore(Ct).get(Rt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),mt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Lt.apply(this,arguments)}function Ot(e,t){return Pt.apply(this,arguments)}function Pt(){return Pt=$(ee.mark((function e(t,n){var r,i,a;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dt();case 3:return r=e.sent,i=r.transaction(Ct,"readwrite"),a=i.objectStore(Ct),e.next=8,a.put(n,Rt(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),mt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Pt.apply(this,arguments)}function Rt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Mt=function(){function e(t){var n=this;ne(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Bt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ie(e,[{key:"triggerHeartbeat",value:function(){var e=$(ee.mark((function e(){var t,n,r;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ft(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=$(ee.mark((function e(){var t,n,r,i,a;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ft(),n=Vt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ge(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ft(){return(new Date).toISOString().substring(0,10)}function Vt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ae(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),qt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),qt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var jt,Ut,Bt=function(){function e(t){ne(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ie(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=$(ee.mark((function e(){return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Se()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=$(ee.mark((function e(){var t;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,At(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=$(ee.mark((function e(t){var n,r;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ot(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=$(ee.mark((function e(t){var n,r;return ee.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ot(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Be(r.heartbeats),Be(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function qt(e){return ge(JSON.stringify({version:2,heartbeats:e})).length}jt="",ht(new qe("platform-logger",(function(e){return new nt(e)}),"PRIVATE")),ht(new qe("heartbeat",(function(e){return new Mt(e)}),"PRIVATE")),_t(rt,it,jt),_t(rt,it,"esm2017"),_t("fire-js","");var zt=function(){function e(t,n){var r=this;ne(this,e),this._delegate=t,this.firebase=n,lt(t,new qe("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Et(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){lt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ft(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Kt=(X(Ut={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),X(Ut,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ut),Gt=new Ie("app-compat","Firebase",Kt);var Wt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=bt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ne(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:_t,setLogLevel:Tt,onLog:It,apps:null,SDK_VERSION:kt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(ht(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Gt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ke(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ne(n,e=e||ot))throw Gt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(zt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ke(n,e)},createSubscribe:Le,ErrorFactory:Ie,deepExtend:ke}),n}(),Ht=new tt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ht.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Qt=self.firebase.SDK_VERSION;Qt&&Qt.indexOf("LITE")>=0&&Ht.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Yt=Wt;!function(e){_t("@firebase/app-compat","0.1.21",e)}();function $t(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}function Xt(){return Xt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=$t(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xt.apply(this,arguments)}Yt.registerVersion("firebase","9.6.10","app-compat");var Jt,Zt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},en={},tn=tn||{},nn=Zt||self;function rn(){}function an(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function on(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var un="closure_uid_"+(1e9*Math.random()>>>0),sn=0;function cn(e,t,n){return e.call.apply(e.bind,arguments)}function ln(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function fn(e,t,n){return(fn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cn:ln).apply(null,arguments)}function hn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function dn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function pn(){this.s=this.s,this.o=this.o}var vn={};pn.prototype.s=!1,pn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,un)&&e[un]||(e[un]=++sn)}(this);delete vn[e]}},pn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var yn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},mn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function gn(e){return Array.prototype.concat.apply([],arguments)}function kn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function bn(e){return/^[\s\xa0]*$/.test(e)}var wn,xn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function En(e,t){return-1!=e.indexOf(t)}function Sn(e,t){return e<t?-1:e>t?1:0}e:{var _n=nn.navigator;if(_n){var In=_n.userAgent;if(In){wn=In;break e}}wn=""}function Tn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Cn(e){var t={};for(var n in e)t[n]=e[n];return t}var Nn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Nn.length;a++)n=Nn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function An(e){return An[" "](e),e}An[" "]=rn;var Ln,On=En(wn,"Opera"),Pn=En(wn,"Trident")||En(wn,"MSIE"),Rn=En(wn,"Edge"),Mn=Rn||Pn,Fn=En(wn,"Gecko")&&!(En(wn.toLowerCase(),"webkit")&&!En(wn,"Edge"))&&!(En(wn,"Trident")||En(wn,"MSIE"))&&!En(wn,"Edge"),Vn=En(wn.toLowerCase(),"webkit")&&!En(wn,"Edge");function jn(){var e=nn.document;return e?e.documentMode:void 0}e:{var Un="",Bn=function(){var e=wn;return Fn?/rv:([^\);]+)(\)|;)/.exec(e):Rn?/Edge\/([\d\.]+)/.exec(e):Pn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Vn?/WebKit\/(\S+)/.exec(e):On?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Bn&&(Un=Bn?Bn[1]:""),Pn){var qn=jn();if(null!=qn&&qn>parseFloat(Un)){Ln=String(qn);break e}}Ln=Un}var zn,Kn={};function Gn(){return function(e){var t=Kn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=xn(String(Ln)).split("."),n=xn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Sn(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Sn(0==a[2].length,0==o[2].length)||Sn(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(nn.document&&Pn){var Wn=jn();zn=Wn||(parseInt(Ln,10)||void 0)}else zn=void 0;var Hn=zn,Qn=function(){if(!nn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{nn.addEventListener("test",rn,t),nn.removeEventListener("test",rn,t)}catch(n){}return e}();function Yn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function $n(e,t){if(Yn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fn){e:{try{An(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Xn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$n.Z.h.call(this)}}Yn.prototype.h=function(){this.defaultPrevented=!0},dn($n,Yn);var Xn={2:"touch",3:"pen",4:"mouse"};$n.prototype.h=function(){$n.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Jn="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function er(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Zn,this.ca=this.fa=!1}function tr(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function nr(e){this.src=e,this.g={},this.h=0}function rr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=yn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(tr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ir(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}nr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ir(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new er(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ar="closure_lm_"+(1e6*Math.random()|0),or={};function ur(e,t,n,r,i){if(r&&r.once)return cr(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ur(e,t[a],n,r,i);return null}return n=yr(n),e&&e[Jn]?e.N(t,n,on(r)?!!r.capture:!!r,i):sr(e,t,n,!1,r,i)}function sr(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=on(i)?!!i.capture:!!i,u=pr(e);if(u||(e[ar]=u=new nr(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=dr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Qn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function cr(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)cr(e,t[a],n,r,i);return null}return n=yr(n),e&&e[Jn]?e.O(t,n,on(r)?!!r.capture:!!r,i):sr(e,t,n,!0,r,i)}function lr(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)lr(e,t[a],n,r,i);else r=on(r)?!!r.capture:!!r,n=yr(n),e&&e[Jn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ir(a=e.g[t],n,r,i))&&(tr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=pr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ir(t,n,r,i)),(n=-1<e?t[e]:null)&&fr(n))}function fr(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Jn])rr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=pr(t))?(rr(n,e),0==n.h&&(n.src=null,t[ar]=null)):tr(e)}}}function hr(e){return e in or?or[e]:or[e]="on"+e}function dr(e,t){if(e.ca)e=!0;else{t=new $n(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&fr(e),e=n.call(r,t)}return e}function pr(e){return(e=e[ar])instanceof nr?e:null}var vr="__closure_events_fn_"+(1e9*Math.random()>>>0);function yr(e){return"function"===typeof e?e:(e[vr]||(e[vr]=function(t){return e.handleEvent(t)}),e[vr])}function mr(){pn.call(this),this.i=new nr(this),this.P=this,this.I=null}function gr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Yn(t,e);else if(t instanceof Yn)t.target=t.target||e;else{var i=t;Dn(t=new Yn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=kr(o,r,!0,t)&&i}if(i=kr(o=t.g=e,r,!0,t)&&i,i=kr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=kr(o=t.g=n[a],r,!1,t)&&i}function kr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&rr(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}dn(mr,pn),mr.prototype[Jn]=!0,mr.prototype.removeEventListener=function(e,t,n,r){lr(this,e,t,n,r)},mr.prototype.M=function(){if(mr.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)tr(n[r]);delete t.g[e],t.h--}}this.I=null},mr.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},mr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var br=nn.JSON.stringify;function wr(){var e=Nr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var xr,Er=function(){function e(){ne(this,e),this.h=this.g=null}return ie(e,[{key:"add",value:function(e,t){var n=Sr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Sr=new(function(){function e(t,n){ne(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ie(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new _r}),(function(e){return e.reset()})),_r=function(){function e(){ne(this,e),this.next=this.g=this.h=null}return ie(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ir(e){nn.setTimeout((function(){throw e}),0)}function Tr(e,t){xr||function(){var e=nn.Promise.resolve(void 0);xr=function(){e.then(Dr)}}(),Cr||(xr(),Cr=!0),Nr.add(e,t)}var Cr=!1,Nr=new Er;function Dr(){for(var e;e=wr();){try{e.h.call(e.g)}catch(n){Ir(n)}var t=Sr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Cr=!1}function Ar(e,t){mr.call(this),this.h=e||1,this.g=t||nn,this.j=fn(this.kb,this),this.l=Date.now()}function Lr(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Or(e,t,n){if("function"===typeof e)n&&(e=fn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=fn(e.handleEvent,e)}return 2147483647<Number(t)?-1:nn.setTimeout(e,t||0)}function Pr(e){e.g=Or((function(){e.g=null,e.i&&(e.i=!1,Pr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}dn(Ar,mr),(Jt=Ar.prototype).da=!1,Jt.S=null,Jt.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gr(this,"tick"),this.da&&(Lr(this),this.start()))}},Jt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Jt.M=function(){Ar.Z.M.call(this),Lr(this),delete this.g};var Rr=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ie(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Pr(this)}},{key:"M",value:function(){Xt(ce(n.prototype),"M",this).call(this),this.g&&(nn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(pn);function Mr(e){pn.call(this),this.h=e,this.g={}}dn(Mr,pn);var Fr=[];function Vr(e,t,n,r){Array.isArray(n)||(n&&(Fr[0]=n.toString()),n=Fr);for(var i=0;i<n.length;i++){var a=ur(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function jr(e){Tn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&fr(e)}),e),e.g={}}function Ur(){this.g=!0}function Br(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return br(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Mr.prototype.M=function(){Mr.Z.M.call(this),jr(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ur.prototype.Aa=function(){this.g=!1},Ur.prototype.info=function(){};var qr={},zr=null;function Kr(){return zr=zr||new mr}function Gr(e){Yn.call(this,qr.Ma,e)}function Wr(e){var t=Kr();gr(t,new Gr(t,e))}function Hr(e,t){Yn.call(this,qr.STAT_EVENT,e),this.stat=t}function Qr(e){var t=Kr();gr(t,new Hr(t,e))}function Yr(e,t){Yn.call(this,qr.Na,e),this.size=t}function $r(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return nn.setTimeout((function(){e()}),t)}qr.Ma="serverreachability",dn(Gr,Yn),qr.STAT_EVENT="statevent",dn(Hr,Yn),qr.Na="timingevent",dn(Yr,Yn);var Xr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Jr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zr(){}function ei(e){return e.h||(e.h=e.i())}function ti(){}Zr.prototype.h=null;var ni,ri={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ii(){Yn.call(this,"d")}function ai(){Yn.call(this,"c")}function oi(){}function ui(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Mr(this),this.P=ci,e=Mn?125:void 0,this.W=new Ar(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new si}function si(){this.i=null,this.g="",this.h=!1}dn(ii,Yn),dn(ai,Yn),dn(oi,Zr),oi.prototype.g=function(){return new XMLHttpRequest},oi.prototype.i=function(){return{}},ni=new oi;var ci=45e3,li={},fi={};function hi(e,t,n){e.K=1,e.v=Ri(Ni(t)),e.s=n,e.U=!0,di(e,null)}function di(e,t){e.F=Date.now(),mi(e),e.A=Ni(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Qi(n.h,"t",r),e.C=0,n=e.l.H,e.h=new si,e.g=$a(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Rr(fn(e.Ia,e,e.g),e.O)),Vr(e.V,e.g,"readystatechange",e.gb),t=e.H?Cn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Wr(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function pi(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function vi(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=yi(e,n))==fi){4==t&&(e.o=4,Qr(14),i=!1),Br(e.j,e.m,null,"[Incomplete Response]");break}if(r==li){e.o=4,Qr(15),Br(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Br(e.j,e.m,r,null),xi(e,r)}pi(e)&&r!=fi&&r!=li&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Qr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),qa(t),t.L=!0,Qr(11))):(Br(e.j,e.m,n,"[Invalid Chunked Response]"),wi(e),bi(e))}function yi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?fi:(n=Number(t.substring(n,r)),isNaN(n)?li:(r+=1)+n>t.length?fi:(t=t.substr(r,n),e.C=r+n,t))}function mi(e){e.Y=Date.now()+e.P,gi(e,e.P)}function gi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=$r(fn(e.eb,e),t)}function ki(e){e.B&&(nn.clearTimeout(e.B),e.B=null)}function bi(e){0==e.l.G||e.I||Ga(e.l,e)}function wi(e){ki(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Lr(e.W),jr(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function xi(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||na(n.i,e)))if(n.I=e.N,!e.J&&na(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ka(n),Oa(n)}Ba(n),Qr(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=$r(fn(n.ab,n),6e3));if(1>=ta(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Ha(n,11)}else if((e.J||n.g==e)&&Ka(n),!bn(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(En(l,"spdy")||En(l,"quic")||En(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ra(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Pi(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ya(r,r.H?r.la:null,r.W),d.J){ia(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ki(p),mi(p)),r.g=d}else Ua(r);0<n.l.length&&Ma(n)}else"stop"!=a[0]&&"close"!=a[0]||Ha(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ha(n,7):La(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Wr(4)}catch(a){}}function Ei(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(an(e)||"string"===typeof e)mn(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(an(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(an(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Si(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Si)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function _i(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ii(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ii(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ii(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Jt=ui.prototype).setTimeout=function(e){this.P=e},Jt.gb=function(e){e=e.target;var t=this.L;t&&3==Ta(e)?t.l():this.Ia(e)},Jt.Ia=function(e){try{if(e==this.g)e:{var t=Ta(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Mn||this.g&&(this.h.h||this.g.ga()||Ca(this.g)))){this.I||4!=t||7==n||Wr(8==n||0>=r?3:2),ki(this);var i=this.g.ba();this.N=i;t:if(pi(this)){var a=Ca(this.g);e="";var o=a.length,u=4==Ta(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){wi(this),bi(this);var s="";break t}this.h.i=new nn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bn(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Qr(12),wi(this),bi(this);break e}Br(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xi(this,i)}this.U?(vi(this,t,s),Mn&&this.i&&3==t&&(Vr(this.V,this.W,"tick",this.fb),this.W.start())):(Br(this.j,this.m,s,null),xi(this,s)),4==t&&wi(this),this.i&&!this.I&&(4==t?Ga(this.l,this):(this.i=!1,mi(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Qr(12)):(this.o=0,Qr(13)),wi(this),bi(this)}}}catch(t){}},Jt.fb=function(){if(this.g){var e=Ta(this.g),t=this.g.ga();this.C<t.length&&(ki(this),vi(this,e,t),this.i&&4!=e&&mi(this))}},Jt.cancel=function(){this.I=!0,wi(this)},Jt.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Wr(3),Qr(17)),wi(this),this.o=2,bi(this)):gi(this,this.Y-e)},(Jt=Si.prototype).R=function(){_i(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Jt.T=function(){return _i(this),this.g.concat()},Jt.get=function(e,t){return Ii(this.h,e)?this.h[e]:t},Jt.set=function(e,t){Ii(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Jt.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Ti=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ci(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ci){this.g=void 0!==t?t:e.g,Di(this,e.j),this.s=e.s,Ai(this,e.i),Li(this,e.m),this.l=e.l,t=e.h;var n=new Ki;n.i=t.i,t.g&&(n.g=new Si(t.g),n.h=t.h),Oi(this,n),this.o=e.o}else e&&(n=String(e).match(Ti))?(this.g=!!t,Di(this,n[1]||"",!0),this.s=Mi(n[2]||""),Ai(this,n[3]||"",!0),Li(this,n[4]),this.l=Mi(n[5]||"",!0),Oi(this,n[6]||"",!0),this.o=Mi(n[7]||"")):(this.g=!!t,this.h=new Ki(null,this.g))}function Ni(e){return new Ci(e)}function Di(e,t,n){e.j=n?Mi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ai(e,t,n){e.i=n?Mi(t,!0):t}function Li(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Oi(e,t,n){t instanceof Ki?(e.h=t,function(e,t){t&&!e.j&&(Gi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Wi(this,t),Qi(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Fi(t,qi)),e.h=new Ki(t,e.g))}function Pi(e,t,n){e.h.set(t,n)}function Ri(e){return Pi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Mi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Fi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Vi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Vi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ci.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Fi(t,ji,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Fi(t,ji,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Fi(n,"/"==n.charAt(0)?Bi:Ui,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Fi(n,zi)),e.join("")};var ji=/[#\/\?@]/g,Ui=/[#\?:]/g,Bi=/[#\?]/g,qi=/[#\?@]/g,zi=/#/g;function Ki(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Gi(e){e.g||(e.g=new Si,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Wi(e,t){Gi(e),t=Yi(e,t),Ii(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ii((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&_i(e)))}function Hi(e,t){return Gi(e),t=Yi(e,t),Ii(e.g.h,t)}function Qi(e,t,n){Wi(e,t),0<n.length&&(e.i=null,e.g.set(Yi(e,t),kn(n)),e.h+=n.length)}function Yi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Jt=Ki.prototype).add=function(e,t){Gi(this),this.i=null,e=Yi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Jt.forEach=function(e,t){Gi(this),this.g.forEach((function(n,r){mn(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Jt.T=function(){Gi(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Jt.R=function(e){Gi(this);var t=[];if("string"===typeof e)Hi(this,e)&&(t=gn(t,this.g.get(Yi(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=gn(t,e[n])}return t},Jt.set=function(e,t){return Gi(this),this.i=null,Hi(this,e=Yi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Jt.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Jt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var $i=ie((function e(t,n){ne(this,e),this.h=t,this.g=n}));function Xi(e){this.l=e||Zi,nn.PerformanceNavigationTiming?e=0<(e=nn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(nn.g&&nn.g.Ea&&nn.g.Ea()&&nn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ji,Zi=10;function ea(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ta(e){return e.h?1:e.g?e.g.size:0}function na(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ra(e,t){e.g?e.g.add(t):e.h=t}function ia(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function aa(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ae(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return kn(e.i)}function oa(){}function ua(){this.g=new oa}function sa(e,t,n){var r=n||"";try{Ei(e,(function(e,n){var i=e;on(e)&&(i=br(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ca(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function la(e){this.l=e.$b||null,this.j=e.ib||!1}function fa(e,t){mr.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ha,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xi.prototype.cancel=function(){if(this.i=aa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ae(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},oa.prototype.stringify=function(e){return nn.JSON.stringify(e,void 0)},oa.prototype.parse=function(e){return nn.JSON.parse(e,void 0)},dn(la,Zr),la.prototype.g=function(){return new fa(this.l,this.j)},la.prototype.i=(Ji={},function(){return Ji}),dn(fa,mr);var ha=0;function da(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function pa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,va(e)}function va(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Jt=fa.prototype).open=function(e,t){if(this.readyState!=ha)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,va(this)},Jt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||nn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Jt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pa(this)),this.readyState=ha},Jt.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,va(this)),this.g&&(this.readyState=3,va(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof nn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;da(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Jt.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?pa(this):va(this),3==this.readyState&&da(this)}},Jt.Ua=function(e){this.g&&(this.response=this.responseText=e,pa(this))},Jt.Ta=function(e){this.g&&(this.response=e,pa(this))},Jt.ha=function(){this.g&&pa(this)},Jt.setRequestHeader=function(e,t){this.v.append(e,t)},Jt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Jt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ya=nn.JSON.parse;function ma(e){mr.call(this),this.headers=new Si,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ga,this.K=this.L=!1}dn(ma,mr);var ga="",ka=/^https?$/i,ba=["POST","PUT"];function wa(e){return"content-type"==e.toLowerCase()}function xa(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ea(e),_a(e)}function Ea(e){e.D||(e.D=!0,gr(e,"complete"),gr(e,"error"))}function Sa(e){if(e.h&&"undefined"!=typeof tn&&(!e.C[1]||4!=Ta(e)||2!=e.ba()))if(e.v&&4==Ta(e))Or(e.Fa,0,e);else if(gr(e,"readystatechange"),4==Ta(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ti)[1]||null;if(!a&&nn.self&&nn.self.location){var o=nn.self.location.protocol;a=o.substr(0,o.length-1)}i=!ka.test(a?a.toLowerCase():"")}t=i}if(t)gr(e,"complete"),gr(e,"success");else{e.m=6;try{var u=2<Ta(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Ea(e)}}finally{_a(e)}}}function _a(e,t){if(e.g){Ia(e);var n=e.g,r=e.C[0]?rn:null;e.g=null,e.C=null,t||gr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ia(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(nn.clearTimeout(e.A),e.A=null)}function Ta(e){return e.g?e.g.readyState:0}function Ca(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ga:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Na(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Tn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pi(e,t,n))}function Da(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Aa(e){this.za=0,this.l=[],this.h=new Ur,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Da("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Da("baseRetryDelayMs",5e3,e),this.$a=Da("retryDelaySeedMs",1e4,e),this.Ya=Da("forwardChannelMaxRetries",2,e),this.ra=Da("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Xi(e&&e.concurrentRequestLimit),this.Ca=new ua,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function La(e){if(Pa(e),3==e.G){var t=e.V++,n=Ni(e.F);Pi(n,"SID",e.J),Pi(n,"RID",t),Pi(n,"TYPE","terminate"),Va(e,n),(t=new ui(e,e.h,t,void 0)).K=2,t.v=Ri(Ni(n)),n=!1,nn.navigator&&nn.navigator.sendBeacon&&(n=nn.navigator.sendBeacon(t.v.toString(),"")),!n&&nn.Image&&((new Image).src=t.v,n=!0),n||(t.g=$a(t.l,null),t.g.ea(t.v)),t.F=Date.now(),mi(t)}Qa(e)}function Oa(e){e.g&&(qa(e),e.g.cancel(),e.g=null)}function Pa(e){Oa(e),e.u&&(nn.clearTimeout(e.u),e.u=null),Ka(e),e.i.cancel(),e.m&&("number"===typeof e.m&&nn.clearTimeout(e.m),e.m=null)}function Ra(e,t){e.l.push(new $i(e.Za++,t)),3==e.G&&Ma(e)}function Ma(e){ea(e.i)||e.m||(e.m=!0,Tr(e.Ha,e),e.C=0)}function Fa(e,t){var n;n=t?t.m:e.V++;var r=Ni(e.F);Pi(r,"SID",e.J),Pi(r,"RID",n),Pi(r,"AID",e.U),Va(e,r),e.o&&e.s&&Na(r,e.o,e.s),n=new ui(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=ja(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ra(e.i,n),hi(n,r,t)}function Va(e,t){e.j&&Ei({},(function(e,n){Pi(t,n,e)}))}function ja(e,t,n){n=Math.min(e.l.length,n);var r=e.j?fn(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{sa(l,o,"req"+c+"_")}catch(So){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ua(e){e.g||e.u||(e.Y=1,Tr(e.Ga,e),e.A=0)}function Ba(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=$r(fn(e.Ga,e),Wa(e,e.A)),e.A++,!0)}function qa(e){null!=e.B&&(nn.clearTimeout(e.B),e.B=null)}function za(e){e.g=new ui(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ni(e.oa);Pi(t,"RID","rpc"),Pi(t,"SID",e.J),Pi(t,"CI",e.N?"0":"1"),Pi(t,"AID",e.U),Va(e,t),Pi(t,"TYPE","xmlhttp"),e.o&&e.s&&Na(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ri(Ni(t)),n.s=null,n.U=!0,di(n,e)}function Ka(e){null!=e.v&&(nn.clearTimeout(e.v),e.v=null)}function Ga(e,t){var n=null;if(e.g==t){Ka(e),qa(e),e.g=null;var r=2}else{if(!na(e.i,t))return;n=t.D,ia(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;gr(r=Kr(),new Yr(r,n,t,i)),Ma(e)}else Ua(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ta(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=$r(fn(e.Ha,e,t),Wa(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ba(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ha(e,5);break;case 4:Ha(e,10);break;case 3:Ha(e,6);break;default:Ha(e,2)}}function Wa(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ha(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=fn(e.jb,e);n||(n=new Ci("//www.google.com/images/cleardot.gif"),nn.location&&"http"==nn.location.protocol||Di(n,"https"),Ri(n)),function(e,t){var n=new Ur;if(nn.Image){var r=new Image;r.onload=hn(ca,n,r,"TestLoadImage: loaded",!0,t),r.onerror=hn(ca,n,r,"TestLoadImage: error",!1,t),r.onabort=hn(ca,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=hn(ca,n,r,"TestLoadImage: timeout",!1,t),nn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Qr(2);e.G=0,e.j&&e.j.va(t),Qa(e),Pa(e)}function Qa(e){e.G=0,e.I=-1,e.j&&(0==aa(e.i).length&&0==e.l.length||(e.i.i.length=0,kn(e.l),e.l.length=0),e.j.ua())}function Ya(e,t,n){var r=function(e){return e instanceof Ci?Ni(e):new Ci(e,void 0)}(n);if(""!=r.i)t&&Ai(r,t+"."+r.i),Li(r,r.m);else{var i=nn.location;r=function(e,t,n,r){var i=new Ci(null,void 0);return e&&Di(i,e),t&&Ai(i,t),n&&Li(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Tn(e.aa,(function(e,t){Pi(r,t,e)})),t=e.D,n=e.sa,t&&n&&Pi(r,t,n),Pi(r,"VER",e.ma),Va(e,r),r}function $a(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ma(new la({ib:!0})):new ma(e.qa)).L=e.H,t}function Xa(){}function Ja(){if(Pn&&!(10<=Number(Hn)))throw Error("Environmental error: no available transport.")}function Za(e,t){mr.call(this),this.g=new Aa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!bn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new no(this)}function eo(e){ii.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function to(){ai.call(this),this.status=1}function no(e){this.g=e}(Jt=ma.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ni.g(),this.C=this.u?ei(this.u):ei(ni),this.g.onreadystatechange=fn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void xa(this,a)}e=n||"";var i=new Si(this.headers);r&&Ei(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=wa,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=nn.FormData&&e instanceof nn.FormData,!(0<=yn(ba,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ia(this),0<this.B&&((this.K=function(e){return Pn&&Gn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fn(this.pa,this)):this.A=Or(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){xa(this,a)}},Jt.pa=function(){"undefined"!=typeof tn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gr(this,"timeout"),this.abort(8))},Jt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,gr(this,"complete"),gr(this,"abort"),_a(this))},Jt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_a(this,!0)),ma.Z.M.call(this)},Jt.Fa=function(){this.s||(this.F||this.v||this.l?Sa(this):this.cb())},Jt.cb=function(){Sa(this)},Jt.ba=function(){try{return 2<Ta(this)?this.g.status:-1}catch(Ji){return-1}},Jt.ga=function(){try{return this.g?this.g.responseText:""}catch(Ji){return""}},Jt.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ya(t)}},Jt.Da=function(){return this.m},Jt.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Jt=Aa.prototype).ma=8,Jt.G=1,Jt.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Jt.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ui(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Dn(n=Cn(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ja(this,t,r),Pi(i=Ni(this.F),"RID",e),Pi(i,"CVER",22),this.D&&Pi(i,"X-HTTP-Session-Id",this.D),Va(this,i),this.o&&n&&Na(i,this.o,n),ra(this.i,t),this.Ra&&Pi(i,"TYPE","init"),this.ja?(Pi(i,"$req",r),Pi(i,"SID","null"),t.$=!0,hi(t,i,null)):hi(t,i,r),this.G=2}}else 3==this.G&&(e?Fa(this,e):0==this.l.length||ea(this.i)||Fa(this))},Jt.Ga=function(){if(this.u=null,za(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=$r(fn(this.bb,this),e)}},Jt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qr(10),Oa(this),za(this))},Jt.ab=function(){null!=this.v&&(this.v=null,Oa(this),Ba(this),Qr(19))},Jt.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Qr(2)):(this.h.info("Failed to ping google.com"),Qr(1))},(Jt=Xa.prototype).xa=function(){},Jt.wa=function(){},Jt.va=function(){},Jt.ua=function(){},Jt.Oa=function(){},Ja.prototype.g=function(e,t){return new Za(e,t)},dn(Za,mr),Za.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Tr(fn(e.hb,e,t))),Qr(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ya(e,null,e.W),Ma(e)},Za.prototype.close=function(){La(this.g)},Za.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ra(this.g,t)}else this.v?((t={}).__data__=br(e),Ra(this.g,t)):Ra(this.g,e)},Za.prototype.M=function(){this.g.j=null,delete this.j,La(this.g),delete this.g,Za.Z.M.call(this)},dn(eo,ii),dn(to,ai),dn(no,Xa),no.prototype.xa=function(){gr(this.g,"a")},no.prototype.wa=function(e){gr(this.g,new eo(e))},no.prototype.va=function(e){gr(this.g,new to(e))},no.prototype.ua=function(){gr(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,Za.prototype.send=Za.prototype.u,Za.prototype.open=Za.prototype.m,Za.prototype.close=Za.prototype.close,Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Jr.COMPLETE="complete",ti.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",mr.prototype.listen=mr.prototype.N,ma.prototype.listenOnce=ma.prototype.O,ma.prototype.getLastError=ma.prototype.La,ma.prototype.getLastErrorCode=ma.prototype.Da,ma.prototype.getStatus=ma.prototype.ba,ma.prototype.getResponseJson=ma.prototype.Qa,ma.prototype.getResponseText=ma.prototype.ga,ma.prototype.send=ma.prototype.ea;var ro=en.createWebChannelTransport=function(){return new Ja},io=en.getStatEventTarget=function(){return Kr()},ao=en.ErrorCode=Xr,oo=en.EventType=Jr,uo=en.Event=qr,so=en.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},co=en.FetchXmlHttpFactory=la,lo=en.WebChannel=ti,fo=en.XhrIo=ma,ho="@firebase/firestore",po=function(){function e(t){ne(this,e),this.uid=t}return ie(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();po.UNAUTHENTICATED=new po(null),po.GOOGLE_CREDENTIALS=new po("google-credentials-uid"),po.FIRST_PARTY=new po("first-party-uid"),po.MOCK_USER=new po("mock-user");var vo="9.6.10",yo=new tt("@firebase/firestore");function mo(){return yo.logLevel}function go(e){if(yo.logLevel<=We.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(wo);yo.debug.apply(yo,["Firestore (".concat(vo,"): ").concat(e)].concat(Be(i)))}}function ko(e){if(yo.logLevel<=We.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(wo);yo.error.apply(yo,["Firestore (".concat(vo,"): ").concat(e)].concat(Be(i)))}}function bo(e){if(yo.logLevel<=We.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(wo);yo.warn.apply(yo,["Firestore (".concat(vo,"): ").concat(e)].concat(Be(i)))}}function wo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(vo,") INTERNAL ASSERTION FAILED: ")+e;throw ko(t),new Error(t)}function Eo(e,t){e||xo()}function So(e,t){return e}var _o={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Io=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ie(n)}(_e),To=ie((function e(){var t=this;ne(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Co=ie((function e(t,n){ne(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),No=function(){function e(){ne(this,e)}return ie(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(po.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Do=function(){function e(t){ne(this,e),this.token=t,this.changeListener=null}return ie(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ao=function(){function e(t){ne(this,e),this.t=t,this.currentUser=po.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ie(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new To;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new To,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable($(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){go("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(go("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new To)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(go("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Eo("string"==typeof n.accessToken),new Co(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Eo(null===e||"string"==typeof e),new po(e)}}]),e}(),Lo=ie((function e(t,n,r){ne(this,e),this.type="FirstParty",this.user=po.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Oo=function(){function e(t,n,r){ne(this,e),this.h=t,this.l=n,this.m=r}return ie(e,[{key:"getToken",value:function(){return Promise.resolve(new Lo(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(po.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Po=ie((function e(t){ne(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ro=function(){function e(t){ne(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ie(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&go("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,go("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){go("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):go("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Eo("string"==typeof t.token),e.p=t.token,new Po(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Mo=function(){function e(t,n){var r=this;ne(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return ie(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Fo(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Mo.A=-1;var Vo=function(){function e(){ne(this,e)}return ie(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Fo(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function jo(e,t){return e<t?-1:e>t?1:0}function Uo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Bo(e){return e+"\0"}var qo=function(){function e(t,n){if(ne(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Io(_o.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Io(_o.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Io(_o.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Io(_o.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ie(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?jo(this.nanoseconds,e.nanoseconds):jo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),zo=function(){function e(t){ne(this,e),this.timestamp=t}return ie(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new qo(0,0))}},{key:"max",value:function(){return new e(new qo(253402300799,999999999))}}]),e}();function Ko(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Go(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Wo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ho=function(){function e(t,n,r){ne(this,e),void 0===n?n=0:n>t.length&&xo(),void 0===r?r=t.length-n:r>t.length-n&&xo(),this.segments=t,this.offset=n,this.len=r}return ie(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Qo=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Io(_o.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Be(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ho),Yo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$o=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Yo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Io(_o.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Io(_o.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Io(_o.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Io(_o.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ho),Xo=function(){function e(t){ne(this,e),this.fields=t,t.sort($o.comparator)}return ie(e,[{key:"covers",value:function(e){var t,n=ae(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Uo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Jo=function(e){function t(e){ne(this,t),this.binaryString=e}return ie(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return jo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Jo.EMPTY_BYTE_STRING=new Jo("");var Zo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eu(e){if(Eo(!!e),"string"==typeof e){var t=0,n=Zo.exec(e);if(Eo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:tu(e.seconds),nanos:tu(e.nanos)}}function tu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nu(e){return"string"==typeof e?Jo.fromBase64String(e):Jo.fromUint8Array(e)}function ru(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function iu(e){var t=e.mapValue.fields.__previous_value__;return ru(t)?iu(t):t}function au(e){var t=eu(e.mapValue.fields.__local_write_time__.timestampValue);return new qo(t.seconds,t.nanos)}var ou=ie((function e(t,n,r,i,a,o,u,s){ne(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),uu=function(){function e(t,n){ne(this,e),this.projectId=t,this.database=n||"(default)"}return ie(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function su(e){return null==e}function cu(e){return 0===e&&1/e==-1/0}function lu(e){return"number"==typeof e&&Number.isInteger(e)&&!cu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var fu=function(){function e(t){ne(this,e),this.path=t}return ie(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Qo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Qo.fromString(t))}},{key:"fromName",value:function(t){return new e(Qo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Qo.emptyPath())}},{key:"comparator",value:function(e,t){return Qo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Qo(t.slice()))}}]),e}(),hu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},du={nullValue:"NULL_VALUE"};function pu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ru(e)?4:Cu(e)?9:10:xo()}function vu(e,t){if(e===t)return!0;var n=pu(e);if(n!==pu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return au(e).isEqual(au(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=eu(e.timestampValue),r=eu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return nu(e.bytesValue).isEqual(nu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return tu(e.geoPointValue.latitude)===tu(t.geoPointValue.latitude)&&tu(e.geoPointValue.longitude)===tu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return tu(e.integerValue)===tu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=tu(e.doubleValue),r=tu(t.doubleValue);return n===r?cu(n)===cu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Uo(e.arrayValue.values||[],t.arrayValue.values||[],vu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ko(n)!==Ko(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vu(n[i],r[i])))return!1;return!0}(e,t);default:return xo()}}function yu(e,t){return void 0!==(e.values||[]).find((function(e){return vu(e,t)}))}function mu(e,t){if(e===t)return 0;var n=pu(e),r=pu(t);if(n!==r)return jo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=tu(e.integerValue||e.doubleValue),r=tu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return gu(e.timestampValue,t.timestampValue);case 4:return gu(au(e),au(t));case 5:return jo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=nu(e),r=nu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=jo(n[i],r[i]);if(0!==a)return a}return jo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=jo(tu(e.latitude),tu(t.latitude));return 0!==n?n:jo(tu(e.longitude),tu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=mu(n[i],r[i]);if(a)return a}return jo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=jo(r[o],a[o]);if(0!==u)return u;var s=mu(n[r[o]],i[a[o]]);if(0!==s)return s}return jo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw xo()}}function gu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return jo(e,t);var n=eu(e),r=eu(t),i=jo(n.seconds,r.seconds);return 0!==i?i:jo(n.nanos,r.nanos)}function ku(e){return bu(e)}function bu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=eu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,fu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ae(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=bu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ae(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(bu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):xo();var t,n}function wu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function xu(e){return!!e&&"integerValue"in e}function Eu(e){return!!e&&"arrayValue"in e}function Su(e){return!!e&&"nullValue"in e}function _u(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Iu(e){return!!e&&"mapValue"in e}function Tu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Go(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Tu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Tu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Cu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nu(e,t){return void 0===e?t:void 0===t||mu(e,t)>0?e:t}function Du(e,t){return void 0===e?t:void 0===t||mu(e,t)<0?e:t}var Au=function(){function e(t){ne(this,e),this.value=t}return ie(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Iu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(t)}},{key:"setAll",value:function(e){var t=this,n=$o.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Tu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Iu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return vu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Iu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Go(t,(function(t,n){return e[t]=n}));var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Tu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Lu(e){var t=[];return Go(e.fields,(function(e,n){var r=new $o([e]);if(Iu(n)){var i=Lu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ae(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Xo(t)}var Ou=function(){function e(t,n,r,i,a,o){ne(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ie(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Au.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Au.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,zo.min(),zo.min(),Au.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,zo.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,zo.min(),Au.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,zo.min(),Au.empty(),2)}}]),e}(),Pu=ie((function e(t,n,r,i){ne(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ru(e){return e.fields.find((function(e){return 2===e.kind}))}function Mu(e){return e.fields.filter((function(e){return 2!==e.kind}))}Pu.UNKNOWN_ID=-1;var Fu=ie((function e(t,n){ne(this,e),this.fieldPath=t,this.kind=n})),Vu=function(){function e(t,n){ne(this,e),this.sequenceNumber=t,this.offset=n}return ie(e,null,[{key:"empty",value:function(){return new e(0,Bu.min())}}]),e}();function ju(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=zo.fromTimestamp(1e9===r?new qo(n+1,0):new qo(n,r));return new Bu(i,fu.empty(),t)}function Uu(e){return new Bu(e.readTime,e.key,-1)}var Bu=function(){function e(t,n,r){ne(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ie(e,null,[{key:"min",value:function(){return new e(zo.min(),fu.empty(),-1)}},{key:"max",value:function(){return new e(zo.max(),fu.empty(),-1)}}]),e}();function qu(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=fu.comparator(e.documentKey,t.documentKey))?n:jo(e.largestBatchId,t.largestBatchId)}var zu=ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ne(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Ku(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new zu(e,t,n,r,i,a,o)}function Gu(e){var t=So(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ku(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),su(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ku(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ku(e)})).join(",")),t.P=n}return t.P}function Wu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!os(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!vu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ss(e.startAt,t.startAt)&&ss(e.endAt,t.endAt)}function Hu(e){return fu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Qu(e,t){return e.filters.filter((function(e){return e instanceof Yu&&e.field.isEqual(t)}))}var Yu=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(mu(t,this.value)):null!==t&&pu(this.value)===pu(t)&&this.v(mu(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xo()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new $u(e,t,r):"array-contains"===t?new es(e,r):"in"===t?new ts(e,r):"not-in"===t?new ns(e,r):"array-contains-any"===t?new rs(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Xu(e,n):new Ju(e,n)}}]),n}(function(){return ie((function e(){ne(this,e)}))}()),$u=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,e,r,i)).key=fu.fromName(i.referenceValue),a}return ie(n,[{key:"matches",value:function(e){var t=fu.comparator(e.key,this.key);return this.v(t)}}]),n}(Yu),Xu=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,"in",r)).keys=Zu("in",r),i}return ie(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yu),Ju=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,"not-in",r)).keys=Zu("not-in",r),i}return ie(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yu);function Zu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return fu.fromName(e.referenceValue)}))}var es=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"array-contains",r)}return ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Eu(t)&&yu(t.arrayValue,this.value)}}]),n}(Yu),ts=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"in",r)}return ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&yu(this.value.arrayValue,t)}}]),n}(Yu),ns=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"not-in",r)}return ie(n,[{key:"matches",value:function(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!yu(this.value.arrayValue,t)}}]),n}(Yu),rs=function(e){se(n,e);var t=de(n);function n(e,r){return ne(this,n),t.call(this,e,"array-contains-any",r)}return ie(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Eu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return yu(t.value.arrayValue,e)}))}}]),n}(Yu),is=ie((function e(t,n){ne(this,e),this.position=t,this.inclusive=n})),as=ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ne(this,e),this.field=t,this.dir=n}));function os(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function us(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?fu.comparator(fu.fromName(o.referenceValue),n.key):mu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ss(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!vu(e.position[n],t.position[n]))return!1;return!0}var cs=ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ne(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function ls(e,t,n,r,i,a,o,u){return new cs(e,t,n,r,i,a,o,u)}function fs(e){return new cs(e)}function hs(e){return!su(e.limit)&&"F"===e.limitType}function ds(e){return!su(e.limit)&&"L"===e.limitType}function ps(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function vs(e){var t,n=ae(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ys(e){return null!==e.collectionGroup}function ms(e){var t=So(e);if(null===t.D){t.D=[];var n=vs(t),r=ps(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new as(n)),t.D.push(new as($o.keyField(),"asc"));else{var i,a=!1,o=ae(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new as($o.keyField(),s))}}}return t.D}function gs(e){var t=So(e);if(!t.C)if("F"===t.limitType)t.C=Ku(t.path,t.collectionGroup,ms(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ae(ms(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new as(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new is(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new is(t.startAt.position,!t.startAt.inclusive):null;t.C=Ku(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function ks(e,t,n){return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bs(e,t){return Wu(gs(e),gs(t))&&e.limitType===t.limitType}function ws(e){return"".concat(Gu(gs(e)),"|lt:").concat(e.limitType)}function xs(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ku(t.value));var t})).join(", "),"]")),su(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ku(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ku(e)})).join(",")),"Target(".concat(t,")")}(gs(e)),"; limitType=").concat(e.limitType,")")}function Es(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):fu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ae(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ae(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=us(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ms(e),t))&&!(e.endAt&&!function(e,t,n){var r=us(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ms(e),t))}(e,t)}function Ss(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function _s(e){return function(t,n){var r,i=!1,a=ae(ms(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Is(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Is(e,t,n){var r=e.field.isKeyField()?fu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?mu(r,i):xo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xo()}}function Ts(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(t)?"-0":t}}function Cs(e){return{integerValue:""+e}}function Ns(e,t){return lu(t)?Cs(t):Ts(e,t)}var Ds=ie((function e(){ne(this,e),this._=void 0}));function As(e,t,n){return e instanceof Ps?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Rs?Ms(e,t):e instanceof Fs?Vs(e,t):function(e,t){var n=Os(e,t),r=Us(n)+Us(e.k);return xu(n)&&xu(e.k)?Cs(r):Ts(e.M,r)}(e,t)}function Ls(e,t,n){return e instanceof Rs?Ms(e,t):e instanceof Fs?Vs(e,t):n}function Os(e,t){return e instanceof js?xu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ps=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n)}(Ds),Rs=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).elements=e,r}return ie(n)}(Ds);function Ms(e,t){var n,r=Bs(t),i=ae(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return vu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Fs=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).elements=e,r}return ie(n)}(Ds);function Vs(e,t){var n,r=Bs(t),i=ae(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!vu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var js=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).M=e,i.k=r,i}return ie(n)}(Ds);function Us(e){return tu(e.integerValue||e.doubleValue)}function Bs(e){return Eu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var qs=ie((function e(t,n){ne(this,e),this.field=t,this.transform=n}));var zs=ie((function e(t,n){ne(this,e),this.version=t,this.transformResults=n})),Ks=function(){function e(t,n){ne(this,e),this.updateTime=t,this.exists=n}return ie(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Gs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ws=ie((function e(){ne(this,e)}));function Hs(e,t,n){e instanceof Js?function(e,t,n){var r=e.value.clone(),i=tc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Zs?function(e,t,n){if(Gs(e.precondition,t)){var r=tc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ec(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qs(e,t,n){e instanceof Js?function(e,t,n){if(Gs(e.precondition,t)){var r=e.value.clone(),i=nc(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Xs(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Zs?function(e,t,n){if(Gs(e.precondition,t)){var r=nc(e.fieldTransforms,n,t),i=t.data;i.setAll(ec(e)),i.setAll(r),t.convertToFoundDocument(Xs(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Gs(e.precondition,t)&&t.convertToNoDocument(zo.min())}(e,t)}function Ys(e,t){var n,r=null,i=ae(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Os(a.transform,o||null);null!=u&&(null==r&&(r=Au.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function $s(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Uo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Rs&&t instanceof Rs||e instanceof Fs&&t instanceof Fs?Uo(e.elements,t.elements,vu):e instanceof js&&t instanceof js?vu(e.k,t.k):e instanceof Ps&&t instanceof Ps}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Xs(e){return e.isFoundDocument()?e.version:zo.min()}var Js=function(e){se(n,e);var t=de(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ne(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ie(n)}(Ws),Zs=function(e){se(n,e);var t=de(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ne(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ie(n)}(Ws);function ec(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function tc(e,t,n){var r=new Map;Eo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ls(o,u,n[i]))}return r}function nc(e,t,n){var r,i=new Map,a=ae(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,As(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var rc,ic,ac=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ie(n)}(Ws),oc=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ie(n)}(Ws),uc=ie((function e(t){ne(this,e),this.count=t}));function sc(e){switch(e){default:return xo();case _o.CANCELLED:case _o.UNKNOWN:case _o.DEADLINE_EXCEEDED:case _o.RESOURCE_EXHAUSTED:case _o.INTERNAL:case _o.UNAVAILABLE:case _o.UNAUTHENTICATED:return!1;case _o.INVALID_ARGUMENT:case _o.NOT_FOUND:case _o.ALREADY_EXISTS:case _o.PERMISSION_DENIED:case _o.FAILED_PRECONDITION:case _o.ABORTED:case _o.OUT_OF_RANGE:case _o.UNIMPLEMENTED:case _o.DATA_LOSS:return!0}}function cc(e){if(void 0===e)return ko("GRPC error has no .code"),_o.UNKNOWN;switch(e){case rc.OK:return _o.OK;case rc.CANCELLED:return _o.CANCELLED;case rc.UNKNOWN:return _o.UNKNOWN;case rc.DEADLINE_EXCEEDED:return _o.DEADLINE_EXCEEDED;case rc.RESOURCE_EXHAUSTED:return _o.RESOURCE_EXHAUSTED;case rc.INTERNAL:return _o.INTERNAL;case rc.UNAVAILABLE:return _o.UNAVAILABLE;case rc.UNAUTHENTICATED:return _o.UNAUTHENTICATED;case rc.INVALID_ARGUMENT:return _o.INVALID_ARGUMENT;case rc.NOT_FOUND:return _o.NOT_FOUND;case rc.ALREADY_EXISTS:return _o.ALREADY_EXISTS;case rc.PERMISSION_DENIED:return _o.PERMISSION_DENIED;case rc.FAILED_PRECONDITION:return _o.FAILED_PRECONDITION;case rc.ABORTED:return _o.ABORTED;case rc.OUT_OF_RANGE:return _o.OUT_OF_RANGE;case rc.UNIMPLEMENTED:return _o.UNIMPLEMENTED;case rc.DATA_LOSS:return _o.DATA_LOSS;default:return xo()}}(ic=rc||(rc={}))[ic.OK=0]="OK",ic[ic.CANCELLED=1]="CANCELLED",ic[ic.UNKNOWN=2]="UNKNOWN",ic[ic.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ic[ic.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ic[ic.NOT_FOUND=5]="NOT_FOUND",ic[ic.ALREADY_EXISTS=6]="ALREADY_EXISTS",ic[ic.PERMISSION_DENIED=7]="PERMISSION_DENIED",ic[ic.UNAUTHENTICATED=16]="UNAUTHENTICATED",ic[ic.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ic[ic.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ic[ic.ABORTED=10]="ABORTED",ic[ic.OUT_OF_RANGE=11]="OUT_OF_RANGE",ic[ic.UNIMPLEMENTED=12]="UNIMPLEMENTED",ic[ic.INTERNAL=13]="INTERNAL",ic[ic.UNAVAILABLE=14]="UNAVAILABLE",ic[ic.DATA_LOSS=15]="DATA_LOSS";var lc=function(){function e(t,n){ne(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ie(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Go(this.inner,(function(t,n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Wo(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),fc=function(){function e(t,n){ne(this,e),this.comparator=t,this.root=n||dc.EMPTY}return ie(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,dc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,dc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new hc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new hc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new hc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new hc(this.root,e,this.comparator,!0)}}]),e}(),hc=function(){function e(t,n,r,i){ne(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ie(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),dc=function(){function e(t,n,r,i,a){ne(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ie(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw xo();if(this.right.isRed())throw xo();var e=this.left.check();if(e!==this.right.check())throw xo();return e+(this.isRed()?0:1)}}]),e}();dc.EMPTY=null,dc.RED=!0,dc.BLACK=!1,dc.EMPTY=new(function(){function e(){ne(this,e),this.size=0}return ie(e,[{key:"key",get:function(){throw xo()}},{key:"value",get:function(){throw xo()}},{key:"color",get:function(){throw xo()}},{key:"left",get:function(){throw xo()}},{key:"right",get:function(){throw xo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new dc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var pc=function(){function e(t){ne(this,e),this.comparator=t,this.data=new fc(this.comparator)}return ie(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new vc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new vc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),vc=function(){function e(t){ne(this,e),this.iter=t}return ie(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function yc(e){return e.hasNext()?e.getNext():void 0}var mc=new fc(fu.comparator);function gc(){return mc}var kc=new fc(fu.comparator);function bc(){return kc}function wc(){return new lc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var xc=new fc(fu.comparator),Ec=new pc(fu.comparator);function Sc(){for(var e=Ec,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var _c=new pc(jo);function Ic(){return _c}var Tc=function(){function e(t,n,r,i,a){ne(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ie(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Cc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(zo.min(),r,Ic(),gc(),Sc())}}]),e}(),Cc=function(){function e(t,n,r,i,a){ne(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ie(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Jo.EMPTY_BYTE_STRING,n,Sc(),Sc(),Sc())}}]),e}(),Nc=ie((function e(t,n,r,i){ne(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Dc=ie((function e(t,n){ne(this,e),this.targetId=t,this.$=n})),Ac=ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jo.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ne(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Lc=function(){function e(){ne(this,e),this.B=0,this.L=Rc(),this.U=Jo.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return ie(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=Sc(),t=Sc(),n=Sc();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xo()}})),new Cc(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=Rc()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),Oc=function(){function e(t){ne(this,e),this.nt=t,this.st=new Map,this.it=gc(),this.rt=Pc(),this.ot=new pc(jo)}return ie(e,[{key:"ut",value:function(e){var t,n=ae(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=ae(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:xo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Hu(i))if(0===n){var a=new fu(i.path);this.ct(t,a,Ou.newNoDocument(a,zo.min()))}else Eo(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Hu(a.target)){var o=new fu(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Ou.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Sc();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Tc(e,n,this.ot,this.it,r);return this.it=gc(),this.rt=Pc(),this.ot=new pc(jo),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Lc,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new pc(jo),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||go("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Lc),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Pc(){return new fc(fu.comparator)}function Rc(){return new fc(fu.comparator)}var Mc={asc:"ASCENDING",desc:"DESCENDING"},Fc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vc=ie((function e(t,n){ne(this,e),this.databaseId=t,this.N=n}));function jc(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Uc(e,t){return e.N?t.toBase64():t.toUint8Array()}function Bc(e,t){return jc(e,t.toTimestamp())}function qc(e){return Eo(!!e),zo.fromTimestamp(function(e){var t=eu(e);return new qo(t.seconds,t.nanos)}(e))}function zc(e,t){return function(e){return new Qo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Kc(e){var t=Qo.fromString(e);return Eo(dl(t)),t}function Gc(e,t){return zc(e.databaseId,t.path)}function Wc(e,t){var n=Kc(t);if(n.get(1)!==e.databaseId.projectId)throw new Io(_o.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Io(_o.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fu($c(n))}function Hc(e,t){return zc(e.databaseId,t)}function Qc(e){var t=Kc(e);return 4===t.length?Qo.emptyPath():$c(t)}function Yc(e){return new Qo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $c(e){return Eo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Xc(e,t,n){return{name:Gc(e,t),fields:n.value.mapValue.fields}}function Jc(e,t,n){var r=Wc(e,t.name),i=qc(t.updateTime),a=new Au({mapValue:{fields:t.fields}}),o=Ou.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Zc(e,t){return"found"in t?function(e,t){Eo(!!t.found),t.found.name,t.found.updateTime;var n=Wc(e,t.found.name),r=qc(t.found.updateTime),i=new Au({mapValue:{fields:t.found.fields}});return Ou.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Eo(!!t.missing),Eo(!!t.readTime);var n=Wc(e,t.missing),r=qc(t.readTime);return Ou.newNoDocument(n,r)}(e,t):xo()}function el(e,t){var n;if(t instanceof Js)n={update:Xc(e,t.key,t.value)};else if(t instanceof ac)n={delete:Gc(e,t.key)};else if(t instanceof Zs)n={update:Xc(e,t.key,t.data),updateMask:hl(t.fieldMask)};else{if(!(t instanceof oc))return xo();n={verify:Gc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ps)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Rs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof js)return{fieldPath:t.field.canonicalString(),increment:n.k};throw xo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Bc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xo()}(e,t.precondition)),n}function tl(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ks.updateTime(qc(e.updateTime)):void 0!==e.exists?Ks.exists(e.exists):Ks.none()}(t.currentDocument):Ks.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Eo("REQUEST_TIME"===t.setToServerValue),n=new Ps;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Rs(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Fs(i)}else"increment"in t?n=new js(e,t.increment):xo();var a=$o.fromServerFormat(t.fieldPath);return new qs(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Wc(e,t.update.name),a=new Au({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Xo(t.map((function(e){return $o.fromServerFormat(e)})))}(t.updateMask);return new Zs(i,a,o,n,r)}return new Js(i,a,n,r)}if(t.delete){var u=Wc(e,t.delete);return new ac(u,n)}if(t.verify){var s=Wc(e,t.verify);return new oc(s,n)}return xo()}function nl(e,t){return{documents:[Hc(e,t.path)]}}function rl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Hc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Hc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(_u(e.value))return{unaryFilter:{field:sl(e.field),op:"IS_NAN"}};if(Su(e.value))return{unaryFilter:{field:sl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_u(e.value))return{unaryFilter:{field:sl(e.field),op:"IS_NOT_NAN"}};if(Su(e.value))return{unaryFilter:{field:sl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(e.field),op:ul(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:sl(e.field),direction:ol(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||su(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function il(e){var t=Qc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Eo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=al(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new as(cl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return su(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new is(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new is(n,t)}(n.endAt)),ls(t,i,u,o,s,"F",c,l)}function al(e){return e?void 0!==e.unaryFilter?[fl(e)]:void 0!==e.fieldFilter?[ll(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return al(e)})).reduce((function(e,t){return e.concat(t)})):xo():[]}function ol(e){return Mc[e]}function ul(e){return Fc[e]}function sl(e){return{fieldPath:e.canonicalString()}}function cl(e){return $o.fromServerFormat(e.fieldPath)}function ll(e){return Yu.create(cl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xo()}}(e.fieldFilter.op),e.fieldFilter.value)}function fl(e){switch(e.unaryFilter.op){case"IS_NAN":var t=cl(e.unaryFilter.field);return Yu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=cl(e.unaryFilter.field);return Yu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=cl(e.unaryFilter.field);return Yu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=cl(e.unaryFilter.field);return Yu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xo()}}function hl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function dl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function pl(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=yl(t)),t=vl(e.get(n),t);return yl(t)}function vl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function yl(e){return e+"\x01\x01"}function ml(e){var t=e.length;if(Eo(t>=2),2===t)return Eo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Qo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&xo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:xo()}a=o+2}return new Qo(r)}var gl=["userId","batchId"];function kl(e,t){return[e,pl(t)]}function bl(e,t,n){return[e,pl(t),n]}var wl={},xl=["prefixPath","collectionGroup","readTime","documentId"],El=["prefixPath","collectionGroup","documentId"],Sl=["collectionGroup","readTime","prefixPath","documentId"],_l=["canonicalId","targetId"],Il=["targetId","path"],Tl=["path","targetId"],Cl=["collectionId","parent"],Nl=["indexId","uid"],Dl=["uid","sequenceNumber"],Al=["indexId","uid","arrayValue","directionalValue","documentKey"],Ll=["indexId","uid","documentKey"],Ol=["userId","collectionPath","documentId"],Pl=["userId","collectionPath","largestBatchId"],Rl=["userId","collectionGroup","largestBatchId"],Ml=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Fl=[].concat(Be(Ml),["documentOverlays"]),Vl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jl=[].concat(Vl,["indexConfiguration","indexState","indexEntries"]),Ul="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bl=function(){function e(){ne(this,e),this.onCommittedListeners=[]}return ie(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),ql=function(){function e(t){var n=this;ne(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ie(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&xo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ae(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),zl=function(){function e(t,n){var r=this;ne(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new To,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Wl(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Xl(e.target.error);r.At.reject(new Wl(t,n))}}return ie(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(go("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Ql(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Wl(n,t)}}}]),e}(),Kl=function(){function e(t,n,r){ne(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(xe())&&ko("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ie(e,[{key:"Nt",value:function(){var e=$(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return go("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Wl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Io(_o.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Io(_o.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Wl(t,n))},i.onupgradeneeded=function(e){go("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){go("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=$(te().mark((function e(t,n,r,i){var a,o,u,s,c=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(te().mark((function e(){var n,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=zl.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),ql.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,go("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return go("SimpleDb","Removing database:",e),Yl(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Se())return!1;if(e.St())return!0;var t=xe(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Gl=function(){function e(t){ne(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return ie(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Yl(this.Ft.delete())}}]),e}(),Wl=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,_o.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ie(n)}(Io);function Hl(e){return"IndexedDbTransactionError"===e.name}var Ql=function(){function e(t){ne(this,e),this.store=t}return ie(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(go("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(go("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Yl(n)}},{key:"add",value:function(e){return go("SimpleDb","ADD",this.store.name,e,e),Yl(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Yl(this.store.get(e)).next((function(n){return void 0===n&&(n=null),go("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return go("SimpleDb","DELETE",this.store.name,e),Yl(this.store.delete(e))}},{key:"count",value:function(){return go("SimpleDb","COUNT",this.store.name),Yl(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Gt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new ql((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Kt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ql((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){go("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Gt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Gt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new ql((function(n,r){t.onerror=function(e){var t=Xl(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Gt",value:function(e,t){var n=[];return new ql((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Gl(i),o=t(i.primaryKey,i.value,a);if(o instanceof ql){var u=o.catch((function(e){return a.done(),ql.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return ql.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Yl(e){return new ql((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Xl(e.target.error);n(t)}}))}var $l=!1;function Xl(e){var t=Kl.Vt(xe());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Io("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return $l||($l=!0,setTimeout((function(){throw r}),0)),r}}return e}var Jl=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return ie(n)}(Bl);function Zl(e,t){var n=So(e);return Kl.xt(n.Ht,t)}var ef=function(){function e(t,n,r,i){ne(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ie(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Hs(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=ae(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Qs(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=ae(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Qs(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(zo.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Sc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(function(e,t){return $s(e,t)}))&&Uo(this.baseMutations,e.baseMutations,(function(e,t){return $s(e,t)}))}}]),e}(),tf=function(){function e(t,n,r,i){ne(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ie(e,null,[{key:"from",value:function(t,n,r){Eo(t.mutations.length===r.length);for(var i=xc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),nf=function(){function e(t,n){ne(this,e),this.largestBatchId=t,this.mutation=n}return ie(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),rf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Jo.EMPTY_BYTE_STRING;ne(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return ie(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),af=ie((function e(t){ne(this,e),this.Jt=t}));function of(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:uf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Gc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:jc(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sf(t.version)};else{if(!t.isUnknownDocument())return xo();r.unknownDocument={path:n.path.toArray(),version:sf(t.version)}}return r}function uf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function sf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function cf(e){var t=new qo(e.seconds,e.nanoseconds);return zo.fromTimestamp(t)}function lf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return tl(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return tl(e.Jt,t)})),u=qo.fromMillis(t.localWriteTimeMs);return new ef(t.batchId,u,n,o)}function ff(e){var t,n,r=cf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?cf(e.lastLimboFreeSnapshotVersion):zo.min();return void 0!==e.query.documents?(Eo(1===(n=e.query).documents.length),t=gs(fs(Qc(n.documents[0])))):t=function(e){return gs(il(e))}(e.query),new rf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Jo.fromBase64String(e.resumeToken))}function hf(e,t){var n,r=sf(t.snapshotVersion),i=sf(t.lastLimboFreeSnapshotVersion);n=Hu(t.target)?nl(e.Jt,t.target):rl(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Gu(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function df(e){var t=il({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ks(t,t.limit,"L"):t}function pf(e,t){return new nf(t.largestBatchId,tl(e.Jt,t.overlayMutation))}function vf(e,t){var n=t.path.lastSegment();return[e,pl(t.path.popLast()),n]}var yf=function(){function e(){ne(this,e)}return ie(e,[{key:"getBundleMetadata",value:function(e,t){return mf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:cf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return mf(e).put({bundleId:(n=t).id,createTime:sf(qc(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return gf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:df(t.bundledQuery),readTime:cf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return gf(e).put(function(e){return{name:e.name,readTime:sf(qc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function mf(e){return Zl(e,"bundles")}function gf(e){return Zl(e,"namedQueries")}var kf=function(){function e(t,n){ne(this,e),this.M=t,this.userId=n}return ie(e,[{key:"getOverlay",value:function(e,t){var n=this;return bf(e).get(vf(this.userId,t)).next((function(e){return e?pf(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new nf(t,a);i.push(r.Xt(e,o))})),ql.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(pl(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(bf(e).Qt("collectionPathOverlayIndex",i))})),ql.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=wc(),a=pl(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return bf(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=pf(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=wc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bf(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=pf(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return bf(e).put(function(e,t,n){var r=u(vf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:el(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function bf(e){return Zl(e,"documentOverlays")}var wf=function(){function e(){ne(this,e)}return ie(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(tu(e.integerValue));else if("doubleValue"in e){var n=tu(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),cu(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(nu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Cu(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):xo()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),fu.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function xf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ef(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=xf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}wf.fe=new wf;var Sf=function(){function e(){ne(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ie(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Ef(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Ef(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),_f=function(){function e(t){ne(this,e),this.De=t}return ie(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),If=function(){function e(t){ne(this,e),this.De=t}return ie(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Tf=function(){function e(){ne(this,e),this.De=new Sf,this.Ce=new _f(this.De),this.xe=new If(this.De)}return ie(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Cf=function(){function e(t,n,r,i){ne(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ie(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Nf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Df(e.arrayValue,t.arrayValue))?n:0!==(n=Df(e.directionalValue,t.directionalValue))?n:fu.comparator(e.documentKey,t.documentKey)}function Df(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Af=function(){function e(t){ne(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=ae(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ie(e,[{key:"$e",value:function(e){var t=Ru(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Mu(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=ae(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Lf=function(){function e(){ne(this,e),this.qe=new Of}return ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),ql.resolve()}},{key:"getCollectionParents",value:function(e,t){return ql.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ql.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ql.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ql.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return ql.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return ql.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ql.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return ql.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ql.resolve()}}]),e}(),Of=function(){function e(){ne(this,e),this.index={}}return ie(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pc(Qo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new pc(Qo.comparator)).toArray()}}]),e}(),Pf=new Uint8Array(0),Rf=function(){function e(t){ne(this,e),this.user=t,this.Ge=new Of,this.Ke=new lc((function(e){return Gu(e)}),(function(e,t){return Wu(e,t)})),this.uid=t.uid||""}return ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ge.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ge.add(t)}));var a={collectionId:r,parent:pl(i)};return Mf(e).put(a)}return ql.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Bo(t),""],!1,!0);return Mf(e).qt(r).next((function(e){var r,i=ae(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ml(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Vf(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Vf(e),r=jf(e),i=Ff(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Ff(e),i=!0,a=new Map;return ql.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Sc();return ql.forEach(a,(function(i,a){var o;go("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Gu(t)));var u=function(e,t){var n=Ru(t);if(void 0===n)return null;var r,i=ae(Qu(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=ae(Mu(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=ae(Qu(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=ae(Mu(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=ae(Qu(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case"<":case"<=":d="nullValue"in(r=h.value)?du:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?wu(uu.empty(),fu.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:xo();break;case"==":case"in":case">=":d=h.value;break;case">":d=h.value,p=!1;break;case"!=":case"not-in":d=du}Nu(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.startAt.position[v];Nu(c,y)===y&&(c=y,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new is(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=ae(Mu(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=ae(Qu(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case">=":case">":d="nullValue"in(r=h.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?wu(uu.empty(),fu.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?hu:xo(),p=!1;break;case"==":case"in":case"<=":d=h.value;break;case"<":d=h.value,p=!1;break;case"!=":case"not-in":d=hu}Du(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.endAt.position[v];Du(c,y)===y&&(c=y,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new is(i,a)}(a,i),f=n.je(i,a,c),h=n.je(i,a,l),d=n.We(i,a,s),p=n.ze(i.indexId,u,f,!!c&&c.inclusive,h,!!l&&l.inclusive,d);return ql.forEach(p,(function(n){return r.Kt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new fu(ml(t.documentKey)))}))}))}))})).next((function(){return e}))}return ql.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):Pf,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,Be(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new Cf(e,fu.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Cf(e,fu.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new Cf(e,fu.empty(),Pf,Pf)}},{key:"getFieldIndex",value:function(e,t){var n=new Af(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new Tf,i=ae(Mu(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);wf.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Tf;return wf.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Tf);var i,a=0,o=ae(Mu(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=ae(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.tn(t,s.fieldPath)&&Eu(c))r=this.en(r,s,c);else{var h=f.Ne(s.kind);wf.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=Be(e),a=[],o=ae(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=ae(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Tf;f.seed(l.Se()),wf.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Yu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Vf(e),i=jf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return ql.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Vu(t.sequenceNumber,new Bu(cf(t.readTime),new fu(ml(t.documentKey)),t.largestBatchId)):Vu.empty(),r=e.fields.map((function(e){var t=u(e,2),n=t[0],r=t[1];return new Fu($o.fromServerFormat(n),r)}));return new Pu(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:jo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Vf(e),a=jf(e);return this.sn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return ql.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:sf(r.readTime),documentKey:pl(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ql.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?ql.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),ql.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?ql.resolve():n.un(e,i,t,a)}))}))}))}))}},{key:"an",value:function(e,t,n){return Ff(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:pl(t.key.path)})}},{key:"cn",value:function(e,t,n){return Ff(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,pl(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=Ff(e),i=new pc(Nf);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,pl(t.path)])},(function(e,r){i=i.add(new Cf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new pc(Nf),r=this.Ze(t,e);if(null==r)return n;var i=Ru(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Eu(a)){var o,u=ae(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Cf(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Cf(t.indexId,e.key,Pf,r));return n}},{key:"un",value:function(e,t,n,r){var i=this;go("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=yc(a),s=yc(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=yc(o)):l?(i(u),u=yc(a)):(u=yc(a),s=yc(o))}}(n,r,Nf,(function(n){a.push(i.an(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),ql.waitFor(a)}},{key:"sn",value:function(e){var t=1;return jf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Nf(e,t)})).filter((function(e,t,n){return!t||0!==Nf(e,n[t-1])}));var r=[];r.push(e);var i,a=ae(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Nf(o,e),s=Nf(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function Mf(e){return Zl(e,"collectionParents")}function Ff(e){return Zl(e,"indexEntries")}function Vf(e){return Zl(e,"indexConfiguration")}function jf(e){return Zl(e,"indexState")}var Uf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bf=function(){function e(t,n,r){ne(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ie(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function qf(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Eo(1===u)})));var c,l=[],f=ae(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=bl(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return ql.waitFor(a).next((function(){return l}))}function zf(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xo();t=e.noDocument}return JSON.stringify(t).length}Bf.DEFAULT_COLLECTION_PERCENTILE=10,Bf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bf.DEFAULT=new Bf(41943040,Bf.DEFAULT_COLLECTION_PERCENTILE,Bf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bf.DISABLED=new Bf(-1,0,0);var Kf=function(){function e(t,n,r,i){ne(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return ie(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wf(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Hf(e),o=Wf(e);return o.add({}).next((function(u){Eo("number"==typeof u);var s,c=new ef(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return el(e.Jt,t)})),i=n.mutations.map((function(t){return el(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new pc((function(e,t){return jo(e.canonicalString(),t.canonicalString())})),d=ae(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=bl(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,wl))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[u]=c.keys()})),ql.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Wf(e).get(t).next((function(e){return e?(Eo(e.userId===n.userId),lf(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?ql.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Wf(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Eo(t.batchId>=r),a=lf(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Wf(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wf(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return lf(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=kl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Hf(e).Wt({range:i},(function(r,i,o){var s=u(r,3),c=s[0],l=s[1],f=s[2],h=ml(l);if(c===n.userId&&t.path.isEqual(h))return Wf(e).get(f).next((function(e){if(!e)throw xo();Eo(e.userId===n.userId),a.push(lf(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new pc(jo),i=[];return t.forEach((function(t){var a=kl(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Hf(e).Wt({range:o},(function(e,i,a){var o=u(e,3),s=o[0],c=o[1],l=o[2],f=ml(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),ql.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=kl(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new pc(jo);return Hf(e).Wt({range:o},(function(e,t,a){var o=u(e,3),c=o[0],l=o[1],f=o[2],h=ml(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.fn(e,s)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Wf(e).get(t).next((function(e){if(null===e)throw xo();Eo(e.userId===n.userId),r.push(lf(n.M,e))})))})),ql.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return qf(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),ql.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ql.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Hf(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ml(e[1]);i.push(a)}else r.done()})).next((function(){Eo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Gf(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return Qf(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Eo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Gf(e,t,n){var r=kl(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Hf(e).Wt({range:a,jt:!0},(function(e,n,r){var a=u(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Wf(e){return Zl(e,"mutations")}function Hf(e){return Zl(e,"documentMutations")}function Qf(e){return Zl(e,"mutationQueues")}var Yf=function(){function e(t){ne(this,e),this.wn=t}return ie(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),$f=function(){function e(t,n){ne(this,e),this.referenceDelegate=t,this.M=n}return ie(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new Yf(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return zo.fromTimestamp(new qo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Xf(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return Eo(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Xf(e).Wt((function(o,u){var s=ff(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return ql.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Xf(e).Wt((function(e,n){var r=ff(n);t(r)}))}},{key:"yn",value:function(e){return Jf(e).get("targetGlobalKey").next((function(e){return Eo(null!==e),e}))}},{key:"pn",value:function(e,t){return Jf(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return Xf(e).put(hf(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Gu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Xf(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ff(n);Wu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Zf(e);return t.forEach((function(t){var o=pl(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),ql.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Zf(e);return ql.forEach(t,(function(t){var a=pl(t.path);return ql.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Zf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zf(e),i=Sc();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=ml(e[1]),a=new fu(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=pl(t.path),r=IDBKeyRange.bound([n],[Bo(n)],!1,!0),i=0;return Zf(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=u(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Xf(e).get(t).next((function(e){return e?ff(e):null}))}}]),e}();function Xf(e){return Zl(e,"targets")}function Jf(e){return Zl(e,"targetGlobal")}function Zf(e){return Zl(e,"targetDocuments")}function eh(e){return th.apply(this,arguments)}function th(){return th=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===_o.FAILED_PRECONDITION&&t.message===Ul){e.next=2;break}throw t;case 2:go("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),th.apply(this,arguments)}function nh(e,t){var n=u(e,2),r=n[0],i=n[1],a=u(t,2),o=a[0],s=a[1],c=jo(r,o);return 0===c?jo(i,s):c}var rh=function(){function e(t){ne(this,e),this.En=t,this.buffer=new pc(nh),this.An=0}return ie(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();nh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),ih=function(){function e(t,n){ne(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return ie(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;go("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,$(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Hl(n.t0)){n.next=12;break}go("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,eh(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),ah=function(){function e(t,n){ne(this,e),this.Sn=t,this.params=n}return ie(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ql.resolve(Mo.A);var r=new rh(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(go("LruGarbageCollector","Garbage collection skipped; disabled"),ql.resolve(Uf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(go("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Uf):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(go("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),mo()<=We.DEBUG&&go("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),ql.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),oh=function(){function e(t,n){ne(this,e),this.db=t,this.garbageCollector=function(e,t){return new ah(e,t)}(this,n)}return ie(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return uh(e,n)}},{key:"removeReference",value:function(e,t,n){return uh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return uh(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return Qf(e).zt((function(r){return Gf(e,r,t).next((function(e){return e&&(n=!0),ql.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,u){if(u<=t){var s=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,zo.min()),Zf(e).delete([0,pl(o.path)])}))}));i.push(s)}})).next((function(){return ql.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return uh(e,t)}},{key:"kn",value:function(e,t){var n,r=Zf(e),i=Mo.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=u(e,2),o=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Mo.A&&t(new fu(ml(n)),i),i=c,n=s):i=Mo.A})).next((function(){i!==Mo.A&&t(new fu(ml(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function uh(e,t){return Zf(e).put(function(e,t){return{targetId:0,path:pl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var sh=function(){function e(){ne(this,e),this.changes=new lc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ie(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ou.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ql.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ch=function(){function e(t){ne(this,e),this.M=t}return ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return hh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return hh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],uf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ou.newInvalidDocument(t);return hh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(dh(t))},(function(e,i){r=n.Fn(t,i)})).next((function(){return r}))}},{key:"$n",value:function(e,t){var n=this,r={size:0,document:Ou.newInvalidDocument(t)};return hh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(dh(t))},(function(e,i){r={document:n.Fn(t,i),size:zf(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=gc();return this.Bn(e,t,(function(e,t){var i=n.Fn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=gc(),i=new fc(fu.comparator);return this.Bn(e,t,(function(e,t){var a=n.Fn(e,t);r=r.insert(e,a),i=i.insert(e,zf(t))})).next((function(){return{documents:r,Un:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return ql.resolve();var r=new pc(vh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(dh(r.first()),dh(r.last())),a=r.getIterator(),o=a.getNext();return hh(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=fu.fromSegments([].concat(Be(t.prefixPath),[t.collectionGroup,t.documentId]));o&&vh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(dh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),uf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hh(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=gc(),i=ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Fn(fu.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=gc(),o=ph(t,n),u=ph(t,Bu.max());return hh(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Fn(fu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new lh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return fh(e).get("remoteDocumentGlobalKey").next((function(e){return Eo(!!e),e}))}},{key:"On",value:function(e,t){return fh(e).put("remoteDocumentGlobalKey",t)}},{key:"Fn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Jc(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=fu.fromSegments(t.noDocument.path),i=cf(t.noDocument.readTime);n=Ou.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xo();var a=fu.fromSegments(t.unknownDocument.path),o=cf(t.unknownDocument.version);n=Ou.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new qo(e[0],e[1]);return zo.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(zo.min()))return n}return Ou.newInvalidDocument(e)}}]),e}(),lh=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).qn=e,i.trackRemovals=r,i.Gn=new lc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new pc((function(e,t){return jo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.qn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=of(t.qn.M,o);i=i.add(a.path.popLast());var c=zf(s);r+=c-u.size,n.push(t.qn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=of(t.qn.M,o.convertToNoDocument(zo.min()));n.push(t.qn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.qn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.qn.updateMetadata(e,r)),ql.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.qn.$n(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.qn.Ln(e,t).next((function(e){var t=e.documents;return e.Un.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(sh);function fh(e){return Zl(e,"remoteDocumentGlobal")}function hh(e){return Zl(e,"remoteDocumentsV14")}function dh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ph(e,t){var n=t.documentKey.path.toArray();return[e,uf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vh(e,t){var n=e.path.length-t.path.length;return 0!==n?n:fu.comparator(e,t)}var yh=function(){function e(t){ne(this,e),this.M=t}return ie(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new zl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gl,{unique:!0}),e.createObjectStore("documentMutations")}(e),mh(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ql.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),mh(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gl,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return ql.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Kn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ol});t.createIndex("collectionPathOverlayIndex",Pl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Rl,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:xl});t.createIndex("documentKeyIndex",El),t.createIndex("collectionGroupIndex",Sl)}(e)})).next((function(){return i.Hn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Nl}).createIndex("sequenceNumberIndex",Dl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Al}).createIndex("documentKeyIndex",Ll,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=zf(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Kn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return ql.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return ql.forEach(r,(function(r){Eo(r.userId===n.userId);var i=lf(t.M,r);return qf(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Qo(n),o=function(e){return[0,pl(e)]}(a);r.push(t.get(o).next((function(n){return n?ql.resolve():function(n){return t.put({targetId:0,path:pl(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return ql.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Cl});var n=t.store("collectionParents"),r=new Of,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:pl(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Qo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=u(e,3),r=(n[0],n[1]),a=(n[2],ml(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=ff(r),a=hf(t.M,i);return n.put(a)}))}},{key:"Hn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new fu(Qo.fromString(i.document.name).popFirst(5)):i.noDocument?fu.fromSegments(i.noDocument.path):i.unknownDocument?fu.fromSegments(i.unknownDocument.path):xo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return ql.waitFor(r)}))}}]),e}();function mh(e){e.createObjectStore("targetDocuments",{keyPath:Il}).createIndex("documentTargetsIndex",Tl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_l,{unique:!0}),e.createObjectStore("targetGlobal")}var gh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kh=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(ne(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Jn=a,this.window=o,this.document=u,this.Yn=c,this.Xn=l,this.Zn=f,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=function(e){return Promise.resolve()},!e.vt())throw new Io(_o.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oh(this,i),this.cs=n+"main",this.M=new af(s),this.hs=new Kl(this.cs,this.Zn,new yh(this.M)),this.ls=new $f(this.referenceDelegate,this.M),this.fs=function(e){return new ch(e)}(this.M),this.ds=new yf,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===l&&ko("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ie(e,[{key:"start",value:function(){var e=this;return this.ws().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Io(_o.FAILED_PRECONDITION,gh);return e.gs(),e.ys(),e.ps(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ls.getHighestSequenceNumber(t)}))})).then((function(t){e.ts=new Mo(t,e.Yn)})).then((function(){e.es=!0})).catch((function(t){return e.hs&&e.hs.close(),Promise.reject(t)}))}},{key:"Is",value:function(e){var t=this;return this.us=function(){var n=$(te().mark((function n(r){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.hs.Ot(function(){var t=$(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget($(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ws();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ws",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return wh(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ts(t).next((function(t){t||(e.isPrimary=!1,e.Jn.enqueueRetryable((function(){return e.us(!1)})))}))})).next((function(){return e.Es(t)})).next((function(n){return e.isPrimary&&!n?e.As(t).next((function(){return!1})):!!n&&e.Rs(t).next((function(){return!0}))}))})).catch((function(t){if(Hl(t))return go("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return go("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Jn.enqueueRetryable((function(){return e.us(t)})),e.isPrimary=t}))}},{key:"Ts",value:function(e){var t=this;return bh(e).get("owner").next((function(e){return ql.resolve(t.bs(e))}))}},{key:"Ps",value:function(e){return wh(e).delete(this.clientId)}},{key:"Vs",value:function(){var e=$(te().mark((function e(){var t,n,r,i,a=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vs(this.os,18e5)){e.next=6;break}return this.os=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Zl(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ss(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ql.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._s){n=ae(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._s.removeItem(this.Ds(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ps",value:function(){var e=this;this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ws().then((function(){return e.Vs()})).then((function(){return e.ps()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Es",value:function(e){var t=this;return this.Xn?ql.resolve(!0):bh(e).get("owner").next((function(n){if(null!==n&&t.vs(n.leaseTimestampMs,5e3)&&!t.Cs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new Io(_o.FAILED_PRECONDITION,gh);return!1}}return!(!t.networkEnabled||!t.inForeground)||wh(e).qt().next((function(e){return void 0===t.Ss(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&go("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=$(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),e.next=7,this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Jl(e,Mo.A);return t.As(n).next((function(){return t.Ps(n)}))}));case 7:this.hs.close(),this.Ms();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ss",value:function(e,t){var n=this;return e.filter((function(e){return n.vs(e.updateTimeMs,t)&&!n.Cs(e.clientId)}))}},{key:"Os",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return wh(t).qt().next((function(t){return e.Ss(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.es}},{key:"getMutationQueue",value:function(e,t){return Kf.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getIndexManager",value:function(e){return new Rf(e)}},{key:"getDocumentOverlayCache",value:function(e){return kf.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;go("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.Zn)?jl:13===i?Vl:12===i?Fl:11===i?Ml:void xo();return this.hs.runTransaction(e,o,u,(function(i){return a=new Jl(i,r.ts?r.ts.next():Mo.A),"readwrite-primary"===t?r.Ts(a).next((function(e){return!!e||r.Es(a)})).next((function(t){if(!t)throw ko("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Jn.enqueueRetryable((function(){return r.us(!1)})),new Io(_o.FAILED_PRECONDITION,Ul);return n(a)})).next((function(e){return r.Rs(a).next((function(){return e}))})):r.Fs(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e){var t=this;return bh(e).get("owner").next((function(e){if(null!==e&&t.vs(e.leaseTimestampMs,5e3)&&!t.Cs(e.ownerId)&&!t.bs(e)&&!(t.Xn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Io(_o.FAILED_PRECONDITION,gh)}))}},{key:"Rs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bh(e).put("owner",t)}},{key:"As",value:function(e){var t=this,n=bh(e);return n.get("owner").next((function(e){return t.bs(e)?(go("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ql.resolve()}))}},{key:"vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ko("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gs",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=function(){e.Jn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ws()}))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ns",value:function(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}},{key:"ys",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=function(){t.xs(),Ee()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Jn.enterRestrictedMode(!0),t.Jn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ns))}},{key:"ks",value:function(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}},{key:"Cs",value:function(e){var t;try{var n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return go("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ko("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xs",value:function(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(dn){ko("Failed to set zombie client id.",dn)}}},{key:"Ms",value:function(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(dn){}}},{key:"Ds",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Kl.vt()}}]),e}();function bh(e){return Zl(e,"owner")}function wh(e){return Zl(e,"clientMetadata")}function xh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Eh=function(){function e(t,n,r){ne(this,e),this.fs=t,this.$s=n,this.indexManager=r}return ie(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=ae(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,i=ae(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return fu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):ys(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new fu(t)).next((function(e){var t=bc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=bc();return this.indexManager.getCollectionParents(e,i).next((function(o){return ql.forEach(o,(function(o){var u=function(e,t){return new cs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=ae(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=Ou.newInvalidDocument(s),r=r.insert(s,c)),Qs(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Es(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Sh=function(){function e(t,n,r,i){ne(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return ie(e,null,[{key:"Js",value:function(t,n){var r,i=Sc(),a=Sc(),o=ae(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),_h=function(){function e(){ne(this,e)}return ie(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(zo.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(a){var o=i.ti(t,a);return(hs(t)||ds(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(mo()<=We.DEBUG&&go("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),xs(t)),i.Xs.Ks(e,t,ju(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new pc(_s(e));return t.forEach((function(t,r){Es(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return mo()<=We.DEBUG&&go("QueryEngine","Using full collection scan to execute query:",xs(t)),this.Xs.Ks(e,t,Bu.min())}}]),e}(),Ih=function(){function e(t,n,r,i){ne(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new fc(jo),this.ii=new lc((function(e){return Gu(e)}),Wu),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return ie(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Eh(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function Th(e,t,n,r){return new Ih(e,t,n,r)}function Ch(e,t){return Nh.apply(this,arguments)}function Nh(){return Nh=$(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(i){return t=i,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Sc(),s=ae(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=ae(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=ae(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=ae(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ai.qs(e,u).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Nh.apply(this,arguments)}function Dh(e,t){var n=So(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ql.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Eo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function Ah(e){var t=So(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function Lh(e,t){var n=So(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.ls.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.ls.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Jo.EMPTY_BYTE_STRING,zo.min()).withLastLimboFreeSnapshotVersion(zo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.ls.updateTargetData(e,c))}}));var u=gc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Oh(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(zo.min())){var s=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return ql.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ai.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.si=i,e}))}function Oh(e,t,n){var r=Sc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=gc();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(zo.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):go("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Ph(e,t){var n=So(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function Rh(e,t){var n=So(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(i){return i?(r=i,ql.resolve(r)):n.ls.allocateTargetId(e).next((function(i){return r=new rf(t,i,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function Mh(e,t,n){return Fh.apply(this,arguments)}function Fh(){return Fh=$(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=So(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Hl(e.t1)){e.next=12;break}throw e.t1;case 12:go("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Fh.apply(this,arguments)}function Vh(e,t,n){var r=So(e),i=zo.min(),a=Sc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=So(e),i=r.ii.get(n);return void 0!==i?ql.resolve(r.si.get(i)):r.ls.getTargetData(t,n)}(r,e,gs(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Ks(e,t,n?i:zo.min(),n?a:Sc())})).next((function(e){return Bh(r,Ss(t),e),{documents:e,hi:a}}))}))}function jh(e,t){var n=So(e),r=So(n.ls),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Uh(e,t){var n=So(e),r=n.ri.get(t)||zo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.oi.getAllFromCollectionGroup(e,t,ju(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Bh(n,t,e),e}))}function Bh(e,t,n){var r=zo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}function qh(e,t,n,r){return zh.apply(this,arguments)}function zh(){return zh=$(te().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=So(t),o=Sc(),u=gc(),s=ae(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.li(l.metadata.name),l.document&&(o=o.add(f)),(h=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,Rh(a,function(e){return gs(fs(Qo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Oh(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.ls.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.ls.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ai.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),zh.apply(this,arguments)}function Kh(e,t){return Gh.apply(this,arguments)}function Gh(){return Gh=$(te().mark((function e(t,n){var r,i,a,o=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Sc(),e.next=3,Rh(t,gs(df(n.bundledQuery)));case 3:return i=e.sent,a=So(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=qc(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.ds.saveNamedQuery(e,n);var o=i.withResumeToken(Jo.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.ls.updateTargetData(e,o).next((function(){return a.ls.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ls.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Gh.apply(this,arguments)}var Wh=function(){function e(t){ne(this,e),this.M=t,this._i=new Map,this.wi=new Map}return ie(e,[{key:"getBundleMetadata",value:function(e,t){return ql.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:qc(n.createTime)}),ql.resolve()}},{key:"getNamedQuery",value:function(e,t){return ql.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:df(e.bundledQuery),readTime:qc(e.readTime)}}(t)),ql.resolve()}}]),e}(),Hh=function(){function e(){ne(this,e),this.overlays=new fc(fu.comparator),this.mi=new Map}return ie(e,[{key:"getOverlay",value:function(e,t){return ql.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),ql.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),ql.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=wc(),i=t.length+1,a=new fu(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return ql.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new fc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=wc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=wc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return ql.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new nf(t,n));var a=this.mi.get(t);void 0===a&&(a=Sc(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),Qh=function(){function e(){ne(this,e),this.gi=new pc(Yh.yi),this.pi=new pc(Yh.Ii)}return ie(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Yh(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new Yh(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new fu(new Qo([])),r=new Yh(n,e),i=new Yh(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new fu(new Qo([])),n=new Yh(t,e),r=new Yh(t,e+1),i=Sc();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Yh(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Yh=function(){function e(t,n){ne(this,e),this.key=t,this.Vi=n}return ie(e,null,[{key:"yi",value:function(e,t){return fu.comparator(e.key,t.key)||jo(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return jo(e.Vi,t.Vi)||fu.comparator(e.key,t.key)}}]),e}(),$h=function(){function e(t,n){ne(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new pc(Yh.yi)}return ie(e,[{key:"checkEmpty",value:function(e){return ql.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var a=new ef(i,t,n,r);this.$s.push(a);var o,u=ae(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Si=this.Si.add(new Yh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return ql.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ql.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return ql.resolve(this.$s.length>i?this.$s[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ql.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return ql.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Yh(t,0),i=new Yh(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),ql.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new pc(jo);return t.forEach((function(e){var t=new Yh(e,0),i=new Yh(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),ql.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;fu.isDocumentKey(i)||(i=i.child(""));var a=new Yh(new fu(i),0),o=new pc(jo);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),ql.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Eo(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return ql.forEach(t.mutations,(function(i){var a=new Yh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Yh(t,0),r=this.Si.firstAfterOrEqual(n);return ql.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,ql.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),Xh=function(){function e(t){ne(this,e),this.ki=t,this.docs=new fc(fu.comparator),this.size=0}return ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ql.resolve(n?n.document.mutableCopy():Ou.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=gc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ou.newInvalidDocument(e))})),ql.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=gc(),i=new fu(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||qu(Uu(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return ql.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){xo()}},{key:"Mi",value:function(e,t){return ql.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Jh(this)}},{key:"getSize",value:function(e){return ql.resolve(this.size)}}]),e}(),Jh=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).qn=e,r}return ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.qn.addEntry(e,i)):t.qn.removeEntry(r)})),ql.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}(sh),Zh=function(){function e(t){ne(this,e),this.persistence=t,this.Oi=new lc((function(e){return Gu(e)}),Wu),this.lastRemoteSnapshotVersion=zo.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Qh,this.targetCount=0,this.Bi=Yf.mn()}return ie(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),ql.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ql.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ql.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),ql.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),ql.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new Yf(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,ql.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),ql.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,ql.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ql.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return ql.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return ql.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),ql.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ql.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),ql.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return ql.resolve(n)}},{key:"containsKey",value:function(e,t){return ql.resolve(this.$i.containsKey(t))}}]),e}(),ed=function(){function e(t,n){var r=this;ne(this,e),this.Li={},this.overlays={},this.ts=new Mo(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new Zh(this),this.indexManager=new Lf,this.fs=new Xh((function(e){return r.referenceDelegate.Ui(e)})),this.M=new af(n),this.ds=new Wh(this.M)}return ie(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Hh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new $h(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;go("MemoryPersistence","Starting transaction:",e);var i=new td(this.ts.next());return this.referenceDelegate.qi(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return ql.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),td=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ie(n)}(Bl),nd=function(){function e(t){ne(this,e),this.persistence=t,this.Qi=new Qh,this.ji=null}return ie(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw xo()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),ql.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),ql.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),ql.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ql.forEach(this.zi,(function(r){var i=fu.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,zo.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return ql.or([function(){return ql.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function rd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function id(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ad(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var od=function(){function e(t,n,r,i){ne(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Io(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ko("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ud=function(){function e(t,n,r){ne(this,e),this.targetId=t,this.state=n,this.error=r}return ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Io(i.error.code,i.error.message))),a?new e(t,i.state,r):(ko("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),sd=function(){function e(t,n){ne(this,e),this.clientId=t,this.activeTargetIds=n}return ie(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ic(),o=0;i&&o<r.activeTargetIds.length;++o)i=lu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ko("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),cd=function(){function e(t,n){ne(this,e),this.clientId=t,this.onlineState=n}return ie(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ko("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ld=function(){function e(){ne(this,e),this.activeTargetIds=Ic()}return ie(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),fd=function(){function e(t,n,r,i,a){ne(this,e),this.window=t,this.Jn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new fc(jo),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=rd(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new ld),this.ar=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ie(e,[{key:"start",value:function(){var e=$(te().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Os();case 2:t=e.sent,n=ae(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(rd(this.persistenceKey,i)))&&(o=sd.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=ae(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ad(this.persistenceKey,e));if(n){var r=ud.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(ad(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return go("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){go("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){go("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(go("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void ko("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable($(te().mark((function e(){var r,i,a,o,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.ar.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=Mo.A;if(null!=e)try{var n=JSON.parse(e);Eo("number"==typeof n),t=n}catch(e){ko("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Mo.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new od(this.currentUser,e,t,n),i=id(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=id(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=ad(this.persistenceKey,e),i=new ud(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.ar.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return sd.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return od.Ji(new po(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return ud.Ji(r,t)}},{key:"wr",value:function(e){return cd.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"vr",value:function(){var e=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:go("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Ic();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),hd=function(){function e(){ne(this,e),this.Fr=new ld,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ie(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new ld,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),dd=function(){function e(){ne(this,e)}return ie(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),pd=function(){function e(){var t=this;ne(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return ie(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){go("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ae(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){go("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ae(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),vd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},yd=function(){function e(t){ne(this,e),this.jr=t.jr,this.Wr=t.Wr}return ie(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),md=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ie(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new fo;o.listenOnce(oo.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ao.NO_ERROR:var t=o.getResponseJson();go("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ao.TIMEOUT:go("Connection",'RPC "'+e+'" timed out'),a(new Io(_o.DEADLINE_EXCEEDED,"Request time out"));break;case ao.HTTP_ERROR:var n=o.getStatus();if(go("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(_o).indexOf(t)>=0?t:_o.UNKNOWN}(r.status);a(new Io(u,r.message))}else a(new Io(_o.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Io(_o.UNAVAILABLE,"Connection failed."));break;default:xo()}}finally{go("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ro(),a=io(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new co({})),this.uo(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())||"object"===typeof navigator&&"ReactNative"===navigator.product||xe().indexOf("Electron/")>=0||function(){var e=xe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||xe().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");go("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new yd({jr:function(e){l?go("Connection","Not sending because WebChannel is closed:",e):(c||(go("Connection","Opening WebChannel transport."),s.open(),c=!0),go("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,lo.EventType.OPEN,(function(){l||go("Connection","WebChannel transport opened.")})),h(s,lo.EventType.CLOSE,(function(){l||(l=!0,go("Connection","WebChannel transport closed"),f.eo())})),h(s,lo.EventType.ERROR,(function(e){l||(l=!0,bo("Connection","WebChannel transport errored:",e),f.eo(new Io(_o.UNAVAILABLE,"The operation could not be completed")))})),h(s,lo.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Eo(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){go("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=rc[e];if(void 0!==t)return cc(t)}(a),u=i.message;void 0===o&&(o=_o.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new Io(o,u)),s.close()}else go("Connection","WebChannel received:",n),f.no(n)}})),h(a,uo.STAT_EVENT,(function(e){e.stat===so.PROXY?go("Connection","Detected buffering proxy"):e.stat===so.NOPROXY&&go("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){ne(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ie(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);go("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.ao(e,a,o,n).then((function(e){return go("RestConnection","Received: ",e),e}),(function(t){throw bo("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+vo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=vd[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function gd(){return"undefined"!=typeof window?window:null}function kd(){return"undefined"!=typeof document?document:null}function bd(e){return new Vc(e,!0)}var wd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ne(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ie(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&go("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),xd=function(){function e(t,n,r,i,a,o,u,s){ne(this,e),this.Jn=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new wd(t,n)}return ie(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=$(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=$(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=$(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===_o.RESOURCE_EXHAUSTED?(ko(n.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===_o.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Io(_o.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io($(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return go("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():(go("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Ed=function(e){se(n,e);var t=de(n);function n(e,r,i,a,o,u){var s;return ne(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return ie(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Eo(void 0===t||"string"==typeof t),Jo.fromBase64String(t||"")):(Eo(void 0===t||t instanceof Uint8Array),Jo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?_o.UNKNOWN:cc(e.code);return new Io(t,e.message||"")}(o);n=new Ac(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Wc(e,s.document.name),l=qc(s.document.updateTime),f=new Au({mapValue:{fields:s.document.fields}}),h=Ou.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Nc(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Wc(e,v.document),m=v.readTime?qc(v.readTime):zo.min(),g=Ou.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Nc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Wc(e,b.document),x=b.removedTargetIds||[];n=new Nc([],x,w,null)}else{if(!("filter"in t))return xo();t.filter;var E=t.filter;E.targetId;var S=E.count||0,_=new uc(S),I=E.targetId;n=new Dc(I,_)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return zo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?zo.min():t.readTime?qc(t.readTime):zo.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Yc(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Hu(r)?{documents:nl(e,r)}:{query:rl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Uc(e,t.resumeToken):t.snapshotVersion.compareTo(zo.min())>0&&(n.readTime=jc(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=Yc(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(xd),Sd=function(e){se(n,e);var t=de(n);function n(e,r,i,a,o,u){var s;return ne(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Wo=!1,s}return ie(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Xt(ce(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Eo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Eo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?qc(e.updateTime):qc(t);return n.isEqual(zo.min())&&(n=qc(t)),new zs(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=qc(e.commitTime);return this.listener.Jo(n,t)}return Eo(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Yc(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return el(t.M,e)}))};this.Oo(n)}}]),n}(xd),_d=function(e){se(n,e);var t=de(n);function n(e,r,i,a){var o;return ne(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.Zo=!1,o}return ie(n,[{key:"tu",value:function(){if(this.Zo)throw new Io(_o.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.bo.ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===_o.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Io(_o.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.bo.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===_o.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Io(_o.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ie((function e(){ne(this,e)}))}()),Id=function(){function e(t,n){ne(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ie(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(ko(t),this.su=!1):go("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Td=ie((function e(t,n,r,i,a){var o=this;ne(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget($(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Vd(o),!e.t0){e.next=5;break}return go("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=$(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=So(t)).lu.add(4),e.next=4,Dd(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,Cd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Id(r,i)}));function Cd(e){return Nd.apply(this,arguments)}function Nd(){return Nd=$(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Vd(t)){e.next=18;break}n=ae(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Nd.apply(this,arguments)}function Dd(e){return Ad.apply(this,arguments)}function Ad(){return Ad=$(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ae(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ad.apply(this,arguments)}function Ld(e,t){var n=So(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Fd(n)?Md(n):dp(n).Co()&&Pd(n,t))}function Od(e,t){var n=So(e),r=dp(n);n.hu.delete(t),r.Co()&&Rd(n,t),0===n.hu.size&&(r.Co()?r.ko():Vd(n)&&n._u.set("Unknown"))}function Pd(e,t){e.wu.Z(t.targetId),dp(e).Qo(t)}function Rd(e,t){e.wu.Z(t),dp(e).jo(t)}function Md(e){e.wu=new Oc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),dp(e).start(),e._u.iu()}function Fd(e){return Vd(e)&&!dp(e).Do()&&e.hu.size>0}function Vd(e){return 0===So(e).lu.size}function jd(e){e.wu=void 0}function Ud(e){return Bd.apply(this,arguments)}function Bd(){return Bd=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Pd(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Bd.apply(this,arguments)}function qd(e,t){return zd.apply(this,arguments)}function zd(){return zd=$(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jd(t),Fd(t)?(t._u.uu(n),Md(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),zd.apply(this,arguments)}function Kd(e,t,n){return Gd.apply(this,arguments)}function Gd(){return Gd=$(te().mark((function e(t,n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Ac&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=$(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ae(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),go("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Wd(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Nc?t.wu.ut(n):n instanceof Dc?t.wu._t(n):t.wu.ht(n),r.isEqual(zo.min())){e.next=29;break}return e.prev=14,e.next=17,Ah(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Jo.EMPTY_BYTE_STRING,n.snapshotVersion)),Rd(e,t);var r=new rf(n.target,t,1,n.sequenceNumber);Pd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),go("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Wd(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Gd.apply(this,arguments)}function Wd(e,t,n){return Hd.apply(this,arguments)}function Hd(){return Hd=$(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hl(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Dd(t);case 5:t._u.set("Offline"),r||(r=function(){return Ah(t.localStore)}),t.asyncQueue.enqueueRetryable($(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return go("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,Cd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Hd.apply(this,arguments)}function Qd(e,t){return t().catch((function(n){return Wd(e,n,t)}))}function Yd(e){return $d.apply(this,arguments)}function $d(){return $d=$(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=So(t),r=pp(n),i=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!Xd(n)){e.next=19;break}return e.prev=3,e.next=6,Ph(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Jd(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Wd(n,e.t0);case 17:e.next=2;break;case 19:Zd(n)&&ep(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),$d.apply(this,arguments)}function Xd(e){return Vd(e)&&e.cu.length<10}function Jd(e,t){e.cu.push(t);var n=pp(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Zd(e){return Vd(e)&&!pp(e).Do()&&e.cu.length>0}function ep(e){pp(e).start()}function tp(e){return np.apply(this,arguments)}function np(){return np=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pp(t).Xo();case 1:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}function rp(e){return ip.apply(this,arguments)}function ip(){return ip=$(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pp(t),r=ae(t.cu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}function ap(e,t,n){return op.apply(this,arguments)}function op(){return op=$(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cu.shift(),a=tf.from(i,n,r),e.next=3,Qd(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Yd(t);case 5:case"end":return e.stop()}}),e)}))),op.apply(this,arguments)}function up(e,t){return sp.apply(this,arguments)}function sp(){return sp=$(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&pp(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=$(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sc(i=n.code)||i===_o.ABORTED){e.next=7;break}return r=t.cu.shift(),pp(t).No(),e.next=5,Qd(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Yd(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Zd(t)&&ep(t);case 5:case"end":return e.stop()}}),e)}))),sp.apply(this,arguments)}function cp(e,t){return lp.apply(this,arguments)}function lp(){return lp=$(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=So(t)).asyncQueue.verifyOperationInProgress(),go("RemoteStore","RemoteStore received new credentials"),i=Vd(r),r.lu.add(3),e.next=6,Dd(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,Cd(r);case 12:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function fp(e,t){return hp.apply(this,arguments)}function hp(){return hp=$(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=So(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,Cd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Dd(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}function dp(e){return e.mu||(e.mu=function(e,t,n){var r=So(e);return r.tu(),new Ed(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:Ud.bind(null,e),Jr:qd.bind(null,e),Ko:Kd.bind(null,e)}),e.fu.push(function(){var t=$(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Fd(e)?Md(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:jd(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function pp(e){return e.gu||(e.gu=function(e,t,n){var r=So(e);return r.tu(),new Sd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:tp.bind(null,e),Jr:up.bind(null,e),Yo:rp.bind(null,e),Jo:ap.bind(null,e)}),e.fu.push(function(){var t=$(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Yd(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&(go("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var vp=function(){function e(t,n,r,i,a){ne(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new To,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ie(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Io(_o.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function yp(e,t){if(ko("AsyncQueue","".concat(t,": ").concat(e)),Hl(e))return new Io(_o.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var mp=function(){function e(t){ne(this,e),this.comparator=t?function(e,n){return t(e,n)||fu.comparator(e.key,n.key)}:function(e,t){return fu.comparator(e.key,t.key)},this.keyedMap=bc(),this.sortedSet=new fc(this.comparator)}return ie(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),gp=function(){function e(){ne(this,e),this.yu=new fc(fu.comparator)}return ie(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):xo():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),kp=function(){function e(t,n,r,i,a,o,u,s){ne(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ie(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,mp.emptySet(n),a,r,i,!0,!1)}}]),e}(),bp=ie((function e(){ne(this,e),this.Iu=void 0,this.listeners=[]})),wp=ie((function e(){ne(this,e),this.queries=new lc((function(e){return ws(e)}),bs),this.onlineState="Unknown",this.Tu=new Set}));function xp(e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=$(te().mark((function e(t,n){var r,i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=So(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new bp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=yp(e.t0,"Initialization of query '".concat(xs(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&Cp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ep.apply(this,arguments)}function Sp(e,t){return _p.apply(this,arguments)}function _p(){return _p=$(te().mark((function e(t,n){var r,i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=So(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),_p.apply(this,arguments)}function Ip(e,t){var n,r=So(e),i=!1,a=ae(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=ae(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Cp(r)}function Tp(e,t,n){var r=So(e),i=r.queries.get(t);if(i){var a,o=ae(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Cp(e){e.Tu.forEach((function(e){e.next()}))}var Np=function(){function e(t,n,r){ne(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ie(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ae(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new kp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),a=!0):this.vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=kp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),Dp=function(){function e(t,n){ne(this,e),this.payload=t,this.byteLength=n}return ie(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),Ap=function(){function e(t){ne(this,e),this.M=t}return ie(e,[{key:"li",value:function(e){return Wc(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?Jc(this.M,e.document,!1):Ou.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return qc(e)}}]),e}(),Lp=function(){function e(t,n,r){ne(this,e),this.xu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Op(t)}return ie(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Qo.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new Ap(this.M),i=ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.li(a.metadata.name),s=ae(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Sc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=$(te().mark((function e(){var t,n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qh(this.localStore,new Ap(this.M),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=ae(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Kh(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Op(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Pp=ie((function e(t){ne(this,e),this.key=t})),Rp=ie((function e(t){ne(this,e),this.key=t})),Mp=function(){function e(t,n){ne(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Sc(),this.mutatedKeys=Sc(),this.Lu=_s(t),this.Uu=new mp(this.Lu)}return ie(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new gp,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=hs(this.query)&&i.size===this.query.limit?i.last():null,c=ds(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Es(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),hs(this.query)||ds(this.query))for(;o.size>this.query.limit;){var l=hs(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Ku:r,ei:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Ku.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xo()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new kp(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new gp,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Sc(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new Rp(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new Pp(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=Sc();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return kp.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),Fp=ie((function e(t,n,r){ne(this,e),this.query=t,this.targetId=n,this.view=r})),Vp=ie((function e(t){ne(this,e),this.key=t,this.Xu=!1})),jp=function(){function e(t,n,r,i,a,o){ne(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.ta=new lc((function(e){return ws(e)}),bs),this.ea=new Map,this.na=new Set,this.sa=new fc(fu.comparator),this.ia=new Map,this.ra=new Qh,this.oa={},this.ua=new Map,this.aa=Yf.gn(),this.onlineState="Unknown",this.ca=void 0}return ie(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function Up(e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=$(te().mark((function e(t,n){var r,i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ov(t),!(o=r.ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Rh(r.localStore,gs(n));case 8:return u=e.sent,r.isPrimaryClient&&Ld(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,qp(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function qp(e,t,n,r){return zp.apply(this,arguments)}function zp(){return zp=$(te().mark((function e(t,n,r,i){var a,o,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=$(te().mark((function e(t,n,r,i){var a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,Vh(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(cv(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Vh(t.localStore,n,!0);case 3:return a=e.sent,o=new Mp(n,a.hi),u=o.Gu(a.documents),s=Cc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),cv(t,r,c.zu),l=new Fp(n,r,o),e.abrupt("return",(t.ta.set(n,l),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}function Kp(e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=$(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=So(t),i=r.ta.get(n),!((a=r.ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(i.targetId,a.filter((function(e){return!bs(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Mh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Od(r.remoteStore,i.targetId),uv(r,i.targetId)})).catch(eh);case 9:e.next=14;break;case 11:return uv(r,i.targetId),e.next=14,Mh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}function Wp(e,t,n){return Hp.apply(this,arguments)}function Hp(){return Hp=$(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pv(t),e.prev=1,e.next=4,function(e,t){var n,r=So(e),i=qo.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Sc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,a).next((function(a){n=a;var o,u=[],s=ae(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Ys(c,n.get(c.key));null!=l&&u.push(new Zs(c.key,l,Lu(l.value.mapValue),Ks.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.$s.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new fc(jo)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,hv(i,a.changes);case 9:return e.next=11,Yd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=yp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Hp.apply(this,arguments)}function Qp(e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=$(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),e.prev=1,e.next=4,Lh(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(Eo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Eo(n.Xu):e.removedDocuments.size>0&&(Eo(n.Xu),n.Xu=!1))})),e.next=8,hv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,eh(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Yp.apply(this,arguments)}function $p(e,t,n){var r=So(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=So(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ae(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Cp(n)}(r.eventManager,t),i.length&&r.Zu.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Xp(e,t,n){return Jp.apply(this,arguments)}function Jp(){return Jp=$(te().mark((function e(t,n,r){var i,a,o,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=So(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ia.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new fc(fu.comparator)).insert(o,Ou.newNoDocument(o,zo.min())),s=Sc().add(o),c=new Tc(zo.min(),new Map,new pc(jo),u,s),e.next=9,Qp(i,c);case 9:i.sa=i.sa.remove(o),i.ia.delete(n),fv(i),e.next=16;break;case 14:return e.next=16,Mh(i.localStore,n,!1).then((function(){return uv(i,n,r)})).catch(eh);case 16:case"end":return e.stop()}}),e)}))),Jp.apply(this,arguments)}function Zp(e,t){return ev.apply(this,arguments)}function ev(){return ev=$(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),i=n.batch.batchId,e.prev=1,e.next=4,Dh(r.localStore,n);case 4:return a=e.sent,ov(r,i,null),av(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,hv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,eh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ev.apply(this,arguments)}function tv(e,t,n){return nv.apply(this,arguments)}function nv(){return nv=$(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=So(t),e.prev=1,e.next=4,function(e,t){var n=So(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return Eo(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,ov(i,n,r),av(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,hv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,eh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),nv.apply(this,arguments)}function rv(e,t){return iv.apply(this,arguments)}function iv(){return iv=$(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vd((r=So(t)).remoteStore)||go("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=So(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.$s.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ua.get(i)||[]).push(n),r.ua.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=yp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),iv.apply(this,arguments)}function av(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function ov(e,t,n){var r=So(e),i=r.oa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oa[r.currentUser.toKey()]=i}}function uv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ae(e.ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ta.delete(a),n&&e.Zu.la(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||sv(e,t)}))}function sv(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(Od(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),fv(e))}function cv(e,t,n){var r,i=ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Pp?(e.ra.addReference(a.key,t),lv(e,a)):a instanceof Rp?(go("SyncEngine","Document no longer in limbo: "+a.key),e.ra.removeReference(a.key,t),e.ra.containsKey(a.key)||sv(e,a.key)):xo()}}catch(o){i.e(o)}finally{i.f()}}function lv(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||(go("SyncEngine","New document in limbo: "+n),e.na.add(r),fv(e))}function fv(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new fu(Qo.fromString(t)),r=e.aa.next();e.ia.set(r,new Vp(n)),e.sa=e.sa.insert(n,r),Ld(e.remoteStore,new rf(gs(fs(n.path)),r,2,Mo.A))}}function hv(e,t,n){return dv.apply(this,arguments)}function dv(){return dv=$(te().mark((function e(t,n,r){var i,a,o,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=So(t),a=[],o=[],u=[],e.t0=i.ta.isEmpty(),e.t0){e.next=9;break}return i.ta.forEach((function(e,t){u.push(i.ha(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Sh.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Ko(a),e.next=9,function(){var e=$(te().mark((function e(t,n){var r,i,a,o,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ql.forEach(n,(function(t){return ql.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return ql.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Hl(e.t0)){e.next=10;break}throw e.t0;case 10:go("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ae(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.si.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function pv(e,t){return vv.apply(this,arguments)}function vv(){return vv=$(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=So(t)).currentUser.isEqual(n)){e.next=11;break}return go("SyncEngine","User change. New user:",n.toKey()),e.next=5,Ch(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new Io(_o.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,hv(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),vv.apply(this,arguments)}function yv(e,t){var n=So(e),r=n.ia.get(t);if(r&&r.Xu)return Sc().add(r.key);var i=Sc(),a=n.ea.get(t);if(!a)return i;var o,u=ae(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ta.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function mv(e,t){return gv.apply(this,arguments)}function gv(){return gv=$(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),e.next=3,Vh(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&cv(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),gv.apply(this,arguments)}function kv(e,t){return bv.apply(this,arguments)}function bv(){return bv=$(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),e.abrupt("return",Uh(r.localStore,n).then((function(e){return hv(r,e)})));case 2:case"end":return e.stop()}}),e)}))),bv.apply(this,arguments)}function wv(e,t,n,r){return xv.apply(this,arguments)}function xv(){return xv=$(te().mark((function e(t,n,r,i){var a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=So(t),e.next=3,function(e,t){var n=So(e),r=So(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ai.qs(e,t):ql.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Yd(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(ov(a,n,i||null),av(a,n),function(e,t){So(So(e).$s).dn(t)}(a.localStore,n)):xo();case 11:return e.next=13,hv(a,o);case 13:e.next=16;break;case 15:go("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}function Ev(e,t){return Sv.apply(this,arguments)}function Sv(){return Sv=$(te().mark((function e(t,n){var r,i,a,o,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ov(r=So(t)),Pv(r),!0!==n||!0===r.ca){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,_v(r,i.toArray());case 5:return a=e.sent,r.ca=!0,e.next=9,fp(r.remoteStore,!0);case 9:o=ae(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Ld(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ca){e.next=25;break}return c=[],l=Promise.resolve(),r.ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return uv(r,t),Mh(r.localStore,t,!0)})),Od(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,_v(r,c);case 21:return function(e){var t=So(e);t.ia.forEach((function(e,n){Od(t.remoteStore,n)})),t.ra.bi(),t.ia=new Map,t.sa=new fc(fu.comparator)}(r),r.ca=!1,e.next=25,fp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Sv.apply(this,arguments)}function _v(e,t,n){return Iv.apply(this,arguments)}function Iv(){return Iv=$(te().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=So(t),a=[],o=[],u=ae(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ea.get(c))||0===f.length){e.next=34;break}return e.next=11,Rh(i.localStore,gs(f[0]));case 11:l=e.sent,h=ae(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ta.get(p),e.next=20,mv(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,jh(i.localStore,c);case 36:return m=e.sent,e.next=39,Rh(i.localStore,m);case 39:return l=e.sent,e.next=42,qp(i,Tv(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Iv.apply(this,arguments)}function Tv(e){return ls(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Cv(e){var t=So(e);return So(So(t.localStore).persistence).Os()}function Nv(e,t,n,r){return Dv.apply(this,arguments)}function Dv(){return Dv=$(te().mark((function e(t,n,r,i){var a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=So(t)).ca){e.next=3;break}return e.abrupt("return",void go("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Uh(a.localStore,Ss(o[0]));case 10:return u=e.sent,s=Tc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,hv(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Mh(a.localStore,n,!0);case 17:return uv(a,n,i),e.abrupt("break",20);case 19:xo();case 20:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Av(e,t,n){return Lv.apply(this,arguments)}function Lv(){return Lv=$(te().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Ov(t)).ca){e.next=45;break}a=ae(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ea.has(u)){e.next=10;break}return go("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,jh(i.localStore,u);case 12:return s=e.sent,e.next=15,Rh(i.localStore,s);case 15:return c=e.sent,e.next=18,qp(i,Tv(s),c.targetId,!1);case 18:Ld(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ae(r),e.prev=30,h=te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ea.has(t),!e.t0){e.next=5;break}return e.next=5,Mh(i.localStore,t,!1).then((function(){Od(i.remoteStore,t),uv(i,t)})).catch(eh);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Lv.apply(this,arguments)}function Ov(e){var t=So(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Qp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xp.bind(null,t),t.Zu.Ko=Ip.bind(null,t.eventManager),t.Zu.la=Tp.bind(null,t.eventManager),t}function Pv(e){var t=So(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tv.bind(null,t),t}function Rv(e,t,n){var r=So(e);(function(){var e=$(te().mark((function e(t,n,r){var i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=So(e),r=qc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Op(i)),a=new Lp(i,t.localStore,n.M),e.next=15,n.fa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,hv(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=So(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(bo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Mv=function(){function e(){ne(this,e),this.synchronizeTabs=!1}return ie(e,[{key:"initialize",value:function(){var e=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=bd(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return Th(this.persistence,new _h,e.initialUser,this.M)}},{key:"_a",value:function(e){return new ed(nd.Wi,this.M)}},{key:"da",value:function(e){return new hd}},{key:"terminate",value:function(){var e=$(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Fv=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).ga=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ie(n,[{key:"initialize",value:function(){var e=$(te().mark((function e(t){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(ce(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ga.initialize(this,t);case 4:return e.next=6,Pv(this.ga.syncEngine);case 6:return e.next=8,Yd(this.ga.remoteStore);case 8:return e.next=10,this.persistence.Is((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return Th(this.persistence,new _h,e.initialUser,this.M)}},{key:"wa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new ih(t,e.asyncQueue)}},{key:"_a",value:function(e){var t=xh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Bf.withCacheSize(this.cacheSizeBytes):Bf.DEFAULT;return new kh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,gd(),kd(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"da",value:function(e){return new hd}}]),n}(Mv),Vv=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r,!1)).ga=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ie(n,[{key:"initialize",value:function(){var e=$(te().mark((function e(t){var r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(ce(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ga.syncEngine,e.t0=this.sharedClientState instanceof fd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:wv.bind(null,r),Mr:Nv.bind(null,r),Or:Av.bind(null,r),Os:Cv.bind(null,r),Nr:kv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Is(function(){var e=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ev(i.ga.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"da",value:function(e){var t=gd();if(!fd.vt(t))throw new Io(_o.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=xh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Fv),jv=function(){function e(){ne(this,e)}return ie(e,[{key:"initialize",value:function(){var e=$(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return $p(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=pv.bind(null,this.syncEngine),e.next=12,fp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new wp}},{key:"createDatastore",value:function(e){var t,n=bd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new md(t));return function(e,t,n,r){return new _d(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return $p(o.syncEngine,e,0)},a=pd.vt()?new pd:new dd,new Td(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new jp(e,t,n,r,i,a);return o&&(u.ca=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=$(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=So(t),go("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Dd(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Uv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return $(te().mark((function r(){var i;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return $(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Bv=function(){function e(t){ne(this,e),this.observer=t,this.muted=!1}return ie(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),qv=function(){function e(t,n){var r=this;ne(this,e),this.Ia=t,this.M=n,this.metadata=new To,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ie(e,[{key:"close",value:function(){return this.Ia.cancel()}},{key:"getMetadata",value:function(){var e=$(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fa",value:function(){var e=$(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ea());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ea",value:function(){var e=$(te().mark((function e(){var t,n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Aa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ta.decode(t),r=Number(n),isNaN(r)&&this.Ra("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new Dp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Aa",value:function(){var e=$(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Pa()<0)){e.next=7;break}return e.next=3,this.Va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Pa())<0&&this.Ra("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=$(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ra("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ra",value:function(e){throw this.Ia.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Va",value:function(){var e=$(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ia.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),zv=function(){function e(t){ne(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ie(e,[{key:"lookup",value:function(){var e=$(te().mark((function e(t){var n,r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Io(_o.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=$(te().mark((function e(t,n){var r,i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),i=Yc(r.M)+"/documents",a={documents:n.map((function(e){return Gc(r.M,e)}))},e.next=5,r.co("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Zc(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Eo(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ac(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=$(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=fu.fromPath(t);n.mutations.push(new oc(r,n.precondition(r)))})),e.next=7,function(){var e=$(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),i=Yc(r.M)+"/documents",a={writes:n.map((function(e){return el(r.M,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xo();t=zo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Io(_o.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ks.updateTime(t):Ks.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(zo.min()))throw new Io(_o.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ks.updateTime(t)}return Ks.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Kv=function(){function e(t,n,r,i){ne(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new wd(this.asyncQueue,"transaction_retry")}return ie(e,[{key:"run",value:function(){this.va-=1,this.Sa()}},{key:"Sa",value:function(){var e=this;this.So.Io($(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new zv(e.datastore),(r=e.Da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ca(t)}))}))})).catch((function(t){e.Ca(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Da",value:function(e){try{var t=this.updateFunction(e);return!su(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ca",value:function(e){var t=this;this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!sc(t)}return!1}}]),e}(),Gv=function(){function e(t,n,r,i){var a=this;ne(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=po.UNAUTHENTICATED,this.clientId=Vo.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return go("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return go("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ie(e,[{key:"getConfiguration",value:function(){var e=$(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Io(_o.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new To;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted($(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=yp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Wv(e,t){return Hv.apply(this,arguments)}function Hv(){return Hv=$(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),go("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Ch(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Qv(e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=$(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,$v(t);case 3:return r=e.sent,go("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return cp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return cp(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function $v(e){return Xv.apply(this,arguments)}function Xv(){return Xv=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return go("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Wv(t,new Mv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Xv.apply(this,arguments)}function Jv(e){return Zv.apply(this,arguments)}function Zv(){return Zv=$(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return go("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Qv(t,new jv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Zv.apply(this,arguments)}function ey(e){return $v(e).then((function(e){return e.persistence}))}function ty(e){return $v(e).then((function(e){return e.localStore}))}function ny(e){return Jv(e).then((function(e){return e.remoteStore}))}function ry(e){return Jv(e).then((function(e){return e.syncEngine}))}function iy(e){return ay.apply(this,arguments)}function ay(){return ay=$(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jv(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Up.bind(null,n.syncEngine),r.onUnlisten=Kp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),ay.apply(this,arguments)}function oy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new To;return e.asyncQueue.enqueueAndForget($(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Bv({next:function(a){t.enqueueAndForget((function(){return Sp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Io(_o.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Io(_o.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Np(fs(n.path),a,{includeMetadataChanges:!0,Du:!0});return xp(e,o)},i.next=3,iy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function uy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new To;return e.asyncQueue.enqueueAndForget($(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Bv({next:function(n){t.enqueueAndForget((function(){return Sp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Io(_o.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Np(n,a,{includeMetadataChanges:!0,Du:!0});return xp(e,o)},i.next=3,iy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var sy=new Map;function cy(e,t,n){if(!n)throw new Io(_o.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ly(e,t,n,r){if(!0===t&&!0===r)throw new Io(_o.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function fy(e){if(!fu.isDocumentKey(e))throw new Io(_o.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hy(e){if(fu.isDocumentKey(e))throw new Io(_o.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function dy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":xo()}function py(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Io(_o.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=dy(e);throw new Io(_o.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function vy(e,t){if(t<=0)throw new Io(_o.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var yy=function(){function e(t){var n;if(ne(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Io(_o.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Io(_o.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ly("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ie(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),my=function(){function e(t,n,r){ne(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yy({}),this._settingsFrozen=!1,t instanceof uu?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Io(_o.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(e.options.projectId)}(t))}return ie(e,[{key:"app",get:function(){if(!this._app)throw new Io(_o.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Io(_o.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new No;switch(e.type){case"gapi":var t=e.client;return Eo(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Oo(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Io(_o.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=sy.get(e);t&&(go("ComponentProvider","Removing Datastore"),sy.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function gy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=py(e,my))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&bo("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=po.MOCK_USER;else{o=we(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Io(_o.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new po(s)}e._authCredentials=new Do(new Co(o,u))}}var ky=function(){function e(t,n,r){ne(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ie(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new wy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),by=function(){function e(t,n,r){ne(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ie(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),wy=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,e,r,fs(i)))._path=i,a.type="collection",a}return ie(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ky(this.firestore,null,new fu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(by);function xy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Re(e),cy("collection","path",t),e instanceof my){var a=Qo.fromString.apply(Qo,[t].concat(r));return hy(a),new wy(e,null,a)}if(!(e instanceof ky||e instanceof wy))throw new Io(_o.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qo.fromString.apply(Qo,[t].concat(r)));return hy(o),new wy(e.firestore,null,o)}function Ey(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Re(e),1===arguments.length&&(t=Vo.R()),cy("doc","path",t),e instanceof my){var a=Qo.fromString.apply(Qo,[t].concat(r));return fy(a),new ky(e,null,new fu(a))}if(!(e instanceof ky||e instanceof wy))throw new Io(_o.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qo.fromString.apply(Qo,[t].concat(r)));return fy(o),new ky(e.firestore,e instanceof wy?e.converter:null,new fu(o))}function Sy(e,t){return e=Re(e),t=Re(t),(e instanceof ky||e instanceof wy)&&(t instanceof ky||t instanceof wy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function _y(e,t){return e=Re(e),t=Re(t),e instanceof by&&t instanceof by&&e.firestore===t.firestore&&bs(e._query,t._query)&&e.converter===t.converter}var Iy=function(){function e(){var t=this;ne(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new wd(this,"async_queue_retry"),this.Ua=function(){var e=kd();e&&go("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=kd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return ie(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=kd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new To;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=$(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Hl(e.t0)){e.next=12;break}throw e.t0;case 12:go("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ko("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var i=vp.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(i),i}},{key:"qa",value:function(){this.Fa&&xo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=$(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=ae(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ae(t.Oa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();function Ty(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ae(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Cy=function(){function e(){ne(this,e),this._progressObserver={},this._taskCompletionResolver=new To,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ie(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Ny=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Iy,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ie(n,[{key:"_terminate",value:function(){return this._firestoreClient||Ay(this),this._firestoreClient.terminate()}}]),n}(my);function Dy(e){return e._firestoreClient||Ay(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ay(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ou(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Gv(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Ly(e,t,n){var r=new To;return e.asyncQueue.enqueue($(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Wv(e,n);case 3:return i.next=5,Qv(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===_o.FAILED_PRECONDITION||e.code===_o.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Oy(e){return function(e){return e.asyncQueue.enqueue($(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ey(e);case 2:return n=t.sent,t.next=5,ny(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=So(e);return t.lu.delete(0),Cd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Dy(e=py(e,Ny)))}function Py(e){return function(e){return e.asyncQueue.enqueue($(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ey(e);case 2:return n=t.sent,t.next=5,ny(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=$(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=So(t)).lu.add(0),e.next=4,Dd(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Dy(e=py(e,Ny)))}function Ry(e,t){var n=Dy(e=py(e,Ny)),r=new Cy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new qv(e,t)}(function(e,t){if(e instanceof Uint8Array)return Uv(e,t);if(e instanceof ArrayBuffer)return Uv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,bd(t));e.asyncQueue.enqueueAndForget($(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Rv,t.next=3,ry(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function My(e,t){return function(e,t){return e.asyncQueue.enqueue($(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=So(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.ds.getNamedQuery(e,t)}))},n.next=3,ty(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Dy(e=py(e,Ny)),t).then((function(t){return t?new by(e,null,t.query):null}))}function Fy(e){if(e._initialized||e._terminated)throw new Io(_o.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Vy=function(){function e(){ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Io(_o.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $o(n)}return ie(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var jy=function(){function e(t){ne(this,e),this._byteString=t}return ie(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Jo.fromBase64String(t))}catch(t){throw new Io(_o.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Jo.fromUint8Array(t))}}]),e}(),Uy=ie((function e(t){ne(this,e),this._methodName=t})),By=function(){function e(t,n){if(ne(this,e),!isFinite(t)||t<-90||t>90)throw new Io(_o.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Io(_o.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ie(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return jo(this._lat,e._lat)||jo(this._long,e._long)}}]),e}(),qy=/^__.*__$/,zy=function(){function e(t,n,r){ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ie(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Js(e,this.data,t,this.fieldTransforms)}}]),e}(),Ky=function(){function e(t,n,r){ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ie(e,[{key:"toMutation",value:function(e,t){return new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Gy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xo()}}var Wy=function(){function e(t,n,r,i,a,o){ne(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ie(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return hm(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Gy(this.Ya)&&qy.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),Hy=function(){function e(t,n,r){ne(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||bd(t)}return ie(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wy({Ya:e,methodName:t,oc:n,path:$o.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Qy(e){var t=e._freezeSettings(),n=bd(e._databaseId);return new Hy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Yy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(a.merge||a.mergeFields?2:0,t,n,i);sm("Data must be an object, but it was:",o,r);var u,s,c=om(r,o);if(a.merge)u=new Xo(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ae(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=cm(t,d,n);if(!o.contains(p))throw new Io(_o.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));dm(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Xo(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new zy(new Au(c),u,s)}var $y=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Ya)throw 1===e.Ya?e.ic("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ic("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Uy);function Xy(e,t,n){return new Wy({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Jy=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"_toFieldTransform",value:function(e){return new qs(e.path,new Ps)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Uy),Zy=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).ac=r,i}return ie(n,[{key:"_toFieldTransform",value:function(e){var t=Xy(this,e,!0),n=this.ac.map((function(e){return am(e,t)})),r=new Rs(n);return new qs(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Uy),em=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).ac=r,i}return ie(n,[{key:"_toFieldTransform",value:function(e){var t=Xy(this,e,!0),n=this.ac.map((function(e){return am(e,t)})),r=new Fs(n);return new qs(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Uy),tm=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).cc=r,i}return ie(n,[{key:"_toFieldTransform",value:function(e){var t=new js(e.M,Ns(e.M,this.cc));return new qs(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Uy);function nm(e,t,n,r){var i=e.uc(1,t,n);sm("Data must be an object, but it was:",i,r);var a=[],o=Au.empty();Go(r,(function(e,r){var u=fm(t,e,n);r=Re(r);var s=i.nc(u);if(r instanceof $y)a.push(u);else{var c=am(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Xo(a);return new Ky(o,u,i.fieldTransforms)}function rm(e,t,n,r,i,a){var o=e.uc(1,t,n),u=[cm(t,r,n)],s=[i];if(a.length%2!=0)throw new Io(_o.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(cm(t,a[c])),s.push(a[c+1]);for(var l=[],f=Au.empty(),h=u.length-1;h>=0;--h)if(!dm(l,u[h])){var d=u[h],p=s[h];p=Re(p);var v=o.nc(d);if(p instanceof $y)l.push(d);else{var y=am(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Xo(l);return new Ky(f,m,o.fieldTransforms)}function im(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return am(n,e.uc(r?4:3,t))}function am(e,t){if(um(e=Re(e)))return sm("Unsupported field value:",t,e),om(e,t);if(e instanceof Uy)return function(e,t){if(!Gy(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ae(e);try{for(a.s();!(n=a.n()).done;){var o=am(n.value,t.sc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Re(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ns(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=qo.fromDate(e);return{timestampValue:jc(t.M,n)}}if(e instanceof qo){var r=new qo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:jc(t.M,r)}}if(e instanceof By)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jy)return{bytesValue:Uc(t.M,e._byteString)};if(e instanceof ky){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ic("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:zc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(dy(e)))}(e,t)}function om(e,t){var n={};return Wo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Go(e,(function(e,r){var i=am(r,t.Za(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function um(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof qo||e instanceof By||e instanceof jy||e instanceof ky||e instanceof Uy)}function sm(e,t,n){if(!um(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=dy(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function cm(e,t,n){if((t=Re(t))instanceof Vy)return t._internalPath;if("string"==typeof t)return fm(e,t);throw hm("Field path arguments must be of type string or ",e,!1,void 0,n)}var lm=new RegExp("[~\\*/\\[\\]]");function fm(e,t,n){if(t.search(lm)>=0)throw hm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return pe(Vy,Be(t.split(".")))._internalPath}catch(r){throw hm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Io(_o.INVALID_ARGUMENT,u+e+s)}function dm(e,t){return e.some((function(e){return e.isEqual(t)}))}var pm=function(){function e(t,n,r,i,a){ne(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ie(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ky(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new vm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ym("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),vm=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"data",value:function(){return Xt(ce(n.prototype),"data",this).call(this)}}]),n}(pm);function ym(e,t){return"string"==typeof t?fm(e,t):t instanceof Vy?t._internalPath:t._delegate._internalPath}var mm=function(){function e(t,n){ne(this,e),this.hasPendingWrites=t,this.fromCache=n}return ie(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),gm=function(e){se(n,e);var t=de(n);function n(e,r,i,a,o,u){var s;return ne(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ie(n,[{key:"exists",value:function(){return Xt(ce(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ym("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(pm),km=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xt(ce(n.prototype),"data",this).call(this,e)}}]),n}(gm),bm=function(){function e(t,n,r,i){ne(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new mm(i.hasPendingWrites,i.fromCache),this.query=r}return ie(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new km(n._firestore,n._userDataWriter,r.key,r,new mm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Io(_o.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new km(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new km(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:wm(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function wm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xo()}}function xm(e,t){return e instanceof gm&&t instanceof gm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof bm&&t instanceof bm&&e._firestore===t._firestore&&_y(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Em(e){if(ds(e)&&0===e.explicitOrderBy.length)throw new Io(_o.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sm=ie((function e(){ne(this,e)}));function _m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Im=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).hc=e,a.lc=r,a.fc=i,a.type="where",a}return ie(n,[{key:"_apply",value:function(e){var t=Qy(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Io(_o.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Fm(o,a);var s,c=[],l=ae(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Mm(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Mm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Fm(o,a),u=im(n,"where",o,"in"===a||"not-in"===a);var h=Yu.create(i,a,u);return function(e,t){if(t.S()){var n=vs(e);if(null!==n&&!n.isEqual(t.field))throw new Io(_o.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=ps(e);null!==r&&Vm(e,t.field,r)}var i=function(e,t){var n,r=ae(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Io(_o.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Io(_o.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new by(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Sm);var Tm=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this)).hc=e,i.dc=r,i.type="orderBy",i}return ie(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Io(_o.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Io(_o.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new as(t,n);return function(e,t){if(null===ps(e)){var n=vs(e);null!==n&&Vm(e,n,t.field)}}(e,r),r}(e._query,this.hc,this.dc);return new by(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new cs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Sm);var Cm=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).type=e,a._c=r,a.wc=i,a}return ie(n,[{key:"_apply",value:function(e){return new by(e.firestore,e.converter,ks(e._query,this._c,this.wc))}}]),n}(Sm);var Nm=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return ie(n,[{key:"_apply",value:function(e){var t=Rm(e,this.type,this.mc,this.gc);return new by(e.firestore,e.converter,function(e,t){return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Sm);function Dm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nm("startAt",t,!0)}function Am(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nm("startAfter",t,!1)}var Lm=function(e){se(n,e);var t=de(n);function n(e,r,i){var a;return ne(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return ie(n,[{key:"_apply",value:function(e){var t=Rm(e,this.type,this.mc,this.gc);return new by(e.firestore,e.converter,function(e,t){return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Sm);function Om(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Lm("endBefore",t,!1)}function Pm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Lm("endAt",t,!0)}function Rm(e,t,n,r){if(n[0]=Re(n[0]),n[0]instanceof pm)return function(e,t,n,r,i){if(!r)throw new Io(_o.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=ae(ms(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(wu(t,r.key));else{var c=r.data.field(s.field);if(ru(c))throw new Io(_o.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Io(_o.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new is(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Qy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Io(_o.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Io(_o.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ys(e)&&-1!==c.indexOf("/"))throw new Io(_o.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Qo.fromString(c));if(!fu.isDocumentKey(l))throw new Io(_o.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new fu(l);u.push(wu(t,f))}else{var h=im(n,r,c);u.push(h)}}return new is(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Mm(e,t,n){if("string"==typeof(n=Re(n))){if(""===n)throw new Io(_o.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ys(t)&&-1!==n.indexOf("/"))throw new Io(_o.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Qo.fromString(n));if(!fu.isDocumentKey(r))throw new Io(_o.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wu(e,new fu(r))}if(n instanceof ky)return wu(e,n._key);throw new Io(_o.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(dy(n),"."))}function Fm(e,t){if(!Array.isArray(e)||0===e.length)throw new Io(_o.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Io(_o.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Vm(e,t,n){if(!n.isEqual(t))throw new Io(_o.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var jm=function(){function e(){ne(this,e)}return ie(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Go(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new By(tu(e.latitude),tu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=iu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(au(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=eu(e);return new qo(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Qo.fromString(e);Eo(dl(n));var r=new uu(n.get(1),n.get(3)),i=new fu(n.popFirst(5));return r.isEqual(t)||ko("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Um(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Bm=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).firestore=e,r}return ie(n,[{key:"convertBytes",value:function(e){return new jy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ky(this.firestore,null,t)}}]),n}(jm),qm=function(){function e(t,n){ne(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qy(t)}return ie(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=zm(e,this._firestore),i=Um(r.converter,t,n),a=Yy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ks.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=zm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Re(t))||t instanceof Vy?rm(this._dataReader,"WriteBatch.update",i._key,t,n,o):nm(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ks.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=zm(e,this._firestore);return this._mutations=this._mutations.concat(new ac(t._key,Ks.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Io(_o.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function zm(e,t){if((e=Re(e)).firestore!==t)throw new Io(_o.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Km=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).firestore=e,r}return ie(n,[{key:"convertBytes",value:function(e){return new jy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ky(this.firestore,null,t)}}]),n}(jm);function Gm(e){e=py(e,ky);var t=py(e.firestore,Ny),n=Dy(t),r=new Km(t);return function(e,t){var n=new To;return e.asyncQueue.enqueueAndForget($(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=$(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=So(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ai.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Io(_o.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=yp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ty(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new gm(t,r,e._key,n,new mm(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Wm(e){e=py(e,by);var t=py(e.firestore,Ny),n=Dy(t),r=new Km(t);return function(e,t){var n=new To;return e.asyncQueue.enqueueAndForget($(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=$(te().mark((function e(t,n,r){var i,a,o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vh(t,n,!0);case 3:i=e.sent,a=new Mp(n,i.hi),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=yp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ty(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new bm(t,r,e,n)}))}function Hm(e,t,n){e=py(e,ky);var r=py(e.firestore,Ny),i=Um(e.converter,t,n);return Xm(r,[Yy(Qy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ks.none())])}function Qm(e,t,n){e=py(e,ky);for(var r=py(e.firestore,Ny),i=Qy(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Xm(r,[("string"==typeof(t=Re(t))||t instanceof Vy?rm(i,"updateDoc",e._key,t,n,o):nm(i,"updateDoc",e._key,t)).toMutation(e._key,Ks.exists(!0))])}function Ym(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Re(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Ty(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Ty(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof ky)l=py(e.firestore,Ny),f=fs(e._key.path),c={next:function(t){n[s]&&n[s](Jm(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=py(e,by);l=py(p.firestore,Ny),f=p._query;var v=new Km(l);c={next:function(e){n[s]&&n[s](new bm(l,v,p,e))},error:n[s+1],complete:n[s+2]},Em(e._query)}return function(e,t,n,r){var i=new Bv(r),a=new Np(t,i,n);return e.asyncQueue.enqueueAndForget($(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xp,t.next=3,iy(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.pa(),e.asyncQueue.enqueueAndForget($(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Sp,t.next=3,iy(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Dy(l),f,h,c)}function $m(e,t){return function(e,t){var n=new Bv(t);return e.asyncQueue.enqueueAndForget($(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){So(e).Tu.add(t),t.next()},t.next=3,iy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.pa(),e.asyncQueue.enqueueAndForget($(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){So(e).Tu.delete(t)},t.next=3,iy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Dy(e=py(e,Ny)),Ty(t)?t:{next:t})}function Xm(e,t){return function(e,t){var n=new To;return e.asyncQueue.enqueueAndForget($(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Wp,r.next=3,ry(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Dy(e),t)}function Jm(e,t,n){var r=n.docs.get(t._key),i=new Km(e);return new gm(e,i,t._key,r,new mm(n.hasPendingWrites,n.fromCache),t.converter)}var Zm=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r))._firestore=e,i}return ie(n,[{key:"get",value:function(e){var t=this,r=zm(e,this._firestore),i=new Km(this._firestore);return Xt(ce(n.prototype),"get",this).call(this,e).then((function(e){return new gm(t._firestore,i,r._key,e._document,new mm(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ne(this,e),this._firestore=t,this._transaction=n,this._dataReader=Qy(t)}return ie(e,[{key:"get",value:function(e){var t=this,n=zm(e,this._firestore),r=new Bm(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return xo();var i=e[0];if(i.isFoundDocument())return new pm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pm(t._firestore,r,n._key,null,n.converter);throw xo()}))}},{key:"set",value:function(e,t,n){var r=zm(e,this._firestore),i=Um(r.converter,t,n),a=Yy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=zm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Re(t))||t instanceof Vy?rm(this._dataReader,"Transaction.update",i._key,t,n,o):nm(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=zm(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function eg(e,t){return function(e,t){var n=new To;return e.asyncQueue.enqueueAndForget($(te().mark((function r(){var i;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Jv(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Kv(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Dy(e=py(e,Ny)),(function(n){return t(new Zm(e,n))}))}function tg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zy("arrayUnion",t)}function ng(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new em("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){vo=e}(kt),ht(new qe("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Ny(i,new Ao(e.getProvider("auth-internal")),new Ro(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),_t(ho,"3.4.7",e),_t(ho,"3.4.7","esm2017")}();function rg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Io("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ig(){if("undefined"===typeof Uint8Array)throw new Io("unimplemented","Uint8Arrays are not available in this environment.")}function ag(){if("undefined"==typeof atob)throw new Io("unimplemented","Blobs are unavailable in Firestore in this environment.")}var og=function(){function e(t){ne(this,e),this._delegate=t}return ie(e,[{key:"toBase64",value:function(){return ag(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return ig(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ag(),new e(jy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return ig(),new e(jy.fromUint8Array(t))}}]),e}();function ug(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ae(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var sg=function(){function e(){ne(this,e)}return ie(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Fy(e=py(e,Ny));var n=Dy(e),r=e._freezeSettings(),i=new jv;return Ly(n,i,new Fv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Fy(e=py(e,Ny));var t=Dy(e),n=e._freezeSettings(),r=new jv;return Ly(t,r,new Vv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Io(_o.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new To;return e._queue.enqueueAndForgetEvenWhileRestricted($(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=$(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Kl.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Kl.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(xh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),cg=function(){function e(t,n,r){var i=this;ne(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof uu||(this._appCompat=t)}return ie(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||bo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gy(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Oy(this._delegate)}},{key:"disableNetwork",value:function(){return Py(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&ly("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new To;return e.asyncQueue.enqueueAndForget($(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=rv,n.next=3,ry(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Dy(e=py(e,Ny)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return $m(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Io("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Eg(this,xy(this._delegate,e))}catch(t){throw vg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new pg(this,Ey(this._delegate,e))}catch(t){throw vg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new bg(this,function(e,t){if(e=py(e,my),cy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Io(_o.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new by(e,null,function(e){return new cs(Qo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw vg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return eg(this._delegate,(function(n){return e(new fg(t,n))}))}},{key:"batch",value:function(){var e=this;return Dy(this._delegate),new hg(new qm(this._delegate,(function(t){return Xm(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Ry(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return My(this._delegate,e).then((function(e){return e?new bg(t,e):null}))}}]),e}(),lg=function(e){se(n,e);var t=de(n);function n(e){var r;return ne(this,n),(r=t.call(this)).firestore=e,r}return ie(n,[{key:"convertBytes",value:function(e){return new og(new jy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return pg.forKey(t,this.firestore,null)}}]),n}(jm);var fg=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new lg(t)}return ie(e,[{key:"get",value:function(e){var t=this,n=Sg(e);return this._delegate.get(n).then((function(e){return new gg(t._firestore,new gm(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Sg(e);return n?(rg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Sg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Sg(e);return this._delegate.delete(t),this}}]),e}(),hg=function(){function e(t){ne(this,e),this._delegate=t}return ie(e,[{key:"set",value:function(e,t,n){var r=Sg(e);return n?(rg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Sg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Sg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),dg=function(){function e(t,n,r){ne(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ie(e,[{key:"fromFirestore",value:function(e,t){var n=new km(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kg(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new lg(t),n),i.set(n,a)),a}}]),e}();dg.INSTANCES=new WeakMap;var pg=function(){function e(t,n){ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lg(t)}return ie(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Eg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Eg(this.firestore,xy(this._delegate,e))}catch(t){throw vg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Re(e))instanceof ky&&Sy(this._delegate,e)}},{key:"set",value:function(e,t){t=rg("DocumentReference.set",t);try{return t?Hm(this._delegate,e,t):Hm(this._delegate,e)}catch(n){throw vg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Qm(this._delegate,e):Qm.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw vg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Xm(py(e.firestore,Ny),[new ac(e._key,Ks.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yg(n),a=mg(n,(function(t){return new gg(e.firestore,new gm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ym(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Gm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=py(e,ky);var t=py(e.firestore,Ny);return oy(Dy(t),e._key,{source:"server"}).then((function(n){return Jm(t,e,n)}))}(this._delegate):function(e){e=py(e,ky);var t=py(e.firestore,Ny);return oy(Dy(t),e._key).then((function(n){return Jm(t,e,n)}))}(this._delegate),t.then((function(e){return new gg(n.firestore,new gm(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Io("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ky(n._delegate,r,new fu(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ky(n._delegate,r,t))}}]),e}();function vg(e,t,n){return e.message=e.message.replace(t,n),e}function yg(e){var t,n=ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!ug(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function mg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=ug(e[0])?e[0]:ug(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var gg=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n}return ie(e,[{key:"ref",get:function(){return new pg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return xm(this._delegate,e._delegate)}}]),e}(),kg=function(e){se(n,e);var t=de(n);function n(){return ne(this,n),t.apply(this,arguments)}return ie(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||xo()}(void 0!==t),t}}]),n}(gg),bg=function(){function e(t,n){ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lg(t)}return ie(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,_m(this._delegate,function(e,t,n){var r=t,i=ym("where",e);return new Im(i,r,n)}(t,n,r)))}catch(i){throw vg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,_m(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ym("orderBy",e);return new Tm(n,t)}(t,n)))}catch(r){throw vg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,_m(this._delegate,function(e){return vy("limit",e),new Cm("limit",e,"F")}(t)))}catch(n){throw vg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,_m(this._delegate,function(e){return vy("limitToLast",e),new Cm("limitToLast",e,"L")}(t)))}catch(n){throw vg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,_m(this._delegate,Dm.apply(void 0,arguments)))}catch(t){throw vg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,_m(this._delegate,Am.apply(void 0,arguments)))}catch(t){throw vg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,_m(this._delegate,Om.apply(void 0,arguments)))}catch(t){throw vg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,_m(this._delegate,Pm.apply(void 0,arguments)))}catch(t){throw vg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return _y(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Wm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=py(e,by);var t=py(e.firestore,Ny),n=Dy(t),r=new Km(t);return uy(n,e._query,{source:"server"}).then((function(n){return new bm(t,r,e,n)}))}(this._delegate):function(e){e=py(e,by);var t=py(e.firestore,Ny),n=Dy(t),r=new Km(t);return Em(e._query),uy(n,e._query).then((function(n){return new bm(t,r,e,n)}))}(this._delegate),t.then((function(e){return new xg(n.firestore,new bm(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yg(n),a=mg(n,(function(t){return new xg(e.firestore,new bm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ym(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),wg=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n}return ie(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new kg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),xg=function(){function e(t,n){ne(this,e),this._firestore=t,this._delegate=n}return ie(e,[{key:"query",get:function(){return new bg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new kg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new wg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new kg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return xm(this._delegate,e._delegate)}}]),e}(),Eg=function(e){se(n,e);var t=de(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ie(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new pg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new pg(this.firestore,void 0===e?Ey(this._delegate):Ey(this._delegate,e))}catch(t){throw vg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=py(e.firestore,Ny),r=Ey(e),i=Um(e.converter,t);return Xm(n,[Yy(Qy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ks.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new pg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Sy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(dg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(bg);function Sg(e){return py(e,ky)}var _g,Ig=function(){function e(){ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=pe(Vy,n)}return ie(e,[{key:"isEqual",value:function(e){return(e=Re(e))instanceof Vy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e($o.keyField().canonicalString())}}]),e}(),Tg=function(){function e(t){ne(this,e),this._delegate=t}return ie(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Jy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new $y("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=tg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=ng.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new tm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Cg={Firestore:cg,GeoPoint:By,Timestamp:qo,Blob:og,Transaction:fg,WriteBatch:hg,DocumentReference:pg,DocumentSnapshot:gg,Query:bg,QueryDocumentSnapshot:kg,QuerySnapshot:xg,CollectionReference:Eg,FieldPath:Ig,FieldValue:Tg,setLogLevel:function(e){!function(e){yo.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new qe("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Cg)))})(_g=Yt,(function(e,t){return new cg(e,t,new sg)})),_g.registerVersion("@firebase/firestore-compat","0.1.16");Yt.initializeApp({apiKey:"AIzaSyDsbrZK7dZtWrHCuRFkiZVLhhiEMakmCs8",authDomain:"conponsandoffer-5e013.firebaseapp.com",projectId:"conponsandoffer-5e013",storageBucket:"conponsandoffer-5e013.appspot.com",messagingSenderId:"616710111339",appId:"1:616710111339:web:4124d044f22991199db12e",measurementId:"G-LP5EKYPLGP"});var Ng=Yt,Dg=n(184);var Ag=function(){var e=u((0,r.useState)({}),2),t=e[0],n=e[1],i=u((0,r.useState)(null),2),a=i[0],o=(i[1],u((0,r.useState)(),2)),s=(o[0],o[1]),c=function(e){var t=e.target.name,r=e.target.value;n((function(e){return Z(Z({},e),{},X({},t,r))}))};function l(){return(l=$(te().mark((function e(n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.date=(new Date).getTime(),e.next=3,Ng.firestore().collection("offers").add(n);case 3:r=e.sent,r.id,i=t.title+"\n"+t.body+"\n",s(i+("https://couponsandoffer.github.io/#/product/"+a));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,Dg.jsxs)("div",{className:"container-fluid",children:[(0,Dg.jsx)("textarea",{class:"form-control",rows:"4"}),(0,Dg.jsx)("form",{onSubmit:function(e){e.preventDefault(),function(e){l.apply(this,arguments)}(t)},children:(0,Dg.jsxs)("div",{className:"d-flex form-outline flex-column justify-content-center",children:[(0,Dg.jsx)("div",{className:"form-group",children:(0,Dg.jsxs)("label",{children:["Title:",(0,Dg.jsx)("input",{type:"text",onChange:c,name:"title"})]})}),(0,Dg.jsx)("div",{className:"form-group",children:(0,Dg.jsxs)("label",{children:["body:",(0,Dg.jsx)("input",{type:"text",onChange:c,name:"body"})]})}),(0,Dg.jsx)("div",{children:(0,Dg.jsxs)("label",{className:"form-group",children:["Image Link:",(0,Dg.jsx)("input",{type:"text",onChange:c,name:"img"})]})}),(0,Dg.jsx)("div",{className:"form-group",children:(0,Dg.jsxs)("label",{children:["Affilate Link:",(0,Dg.jsx)("input",{type:"text",onChange:c,name:"link"})]})}),(0,Dg.jsx)("input",{className:"btn btn-primary",type:"submit"})]})}),(0,Dg.jsx)("textarea",{class:"form-control",value:null!==a?a:"",rows:"4"})]})},Lg=function(){return(0,Dg.jsx)("div",{children:(0,Dg.jsx)("div",{className:"d-flex justify-content-center",children:(0,Dg.jsx)("div",{class:"spinner-grow text-primary",style:{width:"10rem",height:"10rem"},role:"status",children:(0,Dg.jsx)("span",{class:"visually-hidden",children:"Loading..."})})})})},Og=function(e,t){return Og=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Og(e,t)};var Pg=function(){return Pg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Pg.apply(this,arguments)};var Rg="Pixel",Mg="Percent",Fg={unit:Mg,value:.8};function Vg(e){return"number"===typeof e?{unit:Mg,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:Rg,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:Mg,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),Fg):(console.warn("scrollThreshold should be string or number"),Fg)}var jg=function(e){function t(t){var n=e.call(this,t)||this;return n.lastScrollTop=0,n.actionTriggered=!1,n.startY=0,n.currentY=0,n.dragging=!1,n.maxPullDownDistance=0,n.getScrollableTarget=function(){return n.props.scrollableTarget instanceof HTMLElement?n.props.scrollableTarget:"string"===typeof n.props.scrollableTarget?document.getElementById(n.props.scrollableTarget):(null===n.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},n.onStart=function(e){n.lastScrollTop||(n.dragging=!0,e instanceof MouseEvent?n.startY=e.pageY:e instanceof TouchEvent&&(n.startY=e.touches[0].pageY),n.currentY=n.startY,n._infScroll&&(n._infScroll.style.willChange="transform",n._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},n.onMove=function(e){n.dragging&&(e instanceof MouseEvent?n.currentY=e.pageY:e instanceof TouchEvent&&(n.currentY=e.touches[0].pageY),n.currentY<n.startY||(n.currentY-n.startY>=Number(n.props.pullDownToRefreshThreshold)&&n.setState({pullToRefreshThresholdBreached:!0}),n.currentY-n.startY>1.5*n.maxPullDownDistance||n._infScroll&&(n._infScroll.style.overflow="visible",n._infScroll.style.transform="translate3d(0px, "+(n.currentY-n.startY)+"px, 0px)")))},n.onEnd=function(){n.startY=0,n.currentY=0,n.dragging=!1,n.state.pullToRefreshThresholdBreached&&(n.props.refreshFunction&&n.props.refreshFunction(),n.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame((function(){n._infScroll&&(n._infScroll.style.overflow="auto",n._infScroll.style.transform="none",n._infScroll.style.willChange="unset")}))},n.onScrollListener=function(e){"function"===typeof n.props.onScroll&&setTimeout((function(){return n.props.onScroll&&n.props.onScroll(e)}),0);var t=n.props.height||n._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;n.actionTriggered||((n.props.inverse?n.isElementAtTop(t,n.props.scrollThreshold):n.isElementAtBottom(t,n.props.scrollThreshold))&&n.props.hasMore&&(n.actionTriggered=!0,n.setState({showLoader:!0}),n.props.next&&n.props.next()),n.lastScrollTop=t.scrollTop)},n.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},n.throttledOnScrollListener=function(e,t,n,r){var i,a=!1,o=0;function u(){i&&clearTimeout(i)}function s(){var s=this,c=Date.now()-o,l=arguments;function f(){o=Date.now(),n.apply(s,l)}function h(){i=void 0}a||(r&&!i&&f(),u(),void 0===r&&c>e?f():!0!==t&&(i=setTimeout(r?h:f,void 0===r?e-c:e)))}return"boolean"!==typeof t&&(r=n,n=t,t=void 0),s.cancel=function(){u(),a=!0},s}(150,n.onScrollListener).bind(n),n.onStart=n.onStart.bind(n),n.onMove=n.onMove.bind(n),n.onEnd=n.onEnd.bind(n),n}return function(e,t){function n(){this.constructor=e}Og(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){if("undefined"===typeof this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?Pg(Pg({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,r=Vg(t);return r.unit===Rg?e.scrollTop<=r.value+n-e.scrollHeight+1:e.scrollTop<=r.value/100+n-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,r=Vg(t);return r.unit===Rg?e.scrollTop+n>=e.scrollHeight-r.value:e.scrollTop+n>=r.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=Pg({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),n=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),i=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return r.createElement("div",{style:i,className:"infinite-scroll-component__outerdiv"},r.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&r.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},r.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!n&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(r.Component),Ug=jg,Bg=Ng.firestore().collection("offers").orderBy("date","desc");var qg=function(){var e=u((0,r.useState)([]),2),t=e[0],n=e[1],i=u((0,r.useState)(!1),2),a=i[0],o=i[1],s=u((0,r.useState)(),2),c=s[0],l=s[1];(0,r.useEffect)((function(){o(!0),Bg.limit(20).get().then((function(e){f(e)}))}),[]);var f=function(e){var t=[];e.forEach((function(e){t.push(Z({id:e.id},e.data()))})),n((function(e){return[].concat(Be(e),t)})),o(!1);var r=e.docs[e.docs.length-1];l(r)};return(0,Dg.jsx)("div",{children:a?(0,Dg.jsx)(Lg,{}):(0,Dg.jsx)(Ug,{dataLength:t.length,next:function(){Bg.startAfter(c).limit(7).get().then((function(e){f(e)}))},hasMore:!0,loader:(0,Dg.jsx)("div",{className:"d-flex justify-content-center",children:(0,Dg.jsx)("h4",{children:" Loading... "})}),children:(0,Dg.jsx)("div",{className:"m-3 p-2",children:(0,Dg.jsx)("div",{className:"row",children:t.map((function(e,t){return(0,Dg.jsx)("div",{className:"col-sm-6 col-md-3 col-lg-2 d-flex align-items-stretch justify-content-center my-1 py-1 pb-2",children:(0,Dg.jsxs)("div",{className:"card hover-shadow",children:[(0,Dg.jsx)("div",{className:"d-flex justify-content-center bg-image hover-zoom ripple","data-mdb-ripple-color":"light",children:(0,Dg.jsx)("img",{src:e.img,alt:e.title,height:"250px",width:"250px",className:"img-fluid"})}),(0,Dg.jsx)("div",{className:"card-body"}),(0,Dg.jsx)("p",{className:"text-center card-title",children:(0,Dg.jsx)("b",{children:"".concat(e.title.substring(0,35),"..")})}),(0,Dg.jsx)(Q,{to:"/product/".concat(e.id),class:"btn btn-primary",children:"Get This Deal"})]})})}))})})})})},zg=function(){var e=function(){var e=(0,r.useContext)(w).matches,t=e[e.length-1];return t?t.params:{}}().id,t=u((0,r.useState)([]),2),n=t[0],i=t[1],a=u((0,r.useState)(!1),2),o=a[0],s=a[1];return(0,r.useEffect)((function(){s(!0);Ng.firestore().collection("offers").doc(e).get().then((function(e){var t=e.data();i(t),s(!1)}))}),[]),(0,Dg.jsx)("div",{children:o?(0,Dg.jsx)(Lg,{}):(0,Dg.jsxs)("div",{classNameName:"container",children:[(0,Dg.jsx)("div",{classNameName:"mt-2 pt-2 ",children:(0,Dg.jsx)("div",{className:"card mb-3",style:{maxWidth:"100%"},children:(0,Dg.jsxs)("div",{className:"row g-0",children:[(0,Dg.jsx)("div",{className:"col-md-4",children:(0,Dg.jsx)("img",{src:n.img,alt:n.title,className:"img-fluid rounded-start"})}),(0,Dg.jsx)("div",{className:"col-md-8",children:(0,Dg.jsxs)("div",{className:"card-body",children:[(0,Dg.jsx)("div",{}),(0,Dg.jsx)("h5",{className:"card-title",children:n.title}),(0,Dg.jsx)("p",{className:"card-text",children:n.body}),(0,Dg.jsx)("p",{className:"card-text",children:(0,Dg.jsxs)("small",{className:"text-muted",children:["Updated: ","".concat(new Date(n.date).toLocaleString())]})}),(0,Dg.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,Dg.jsx)("div",{className:"m-1 p-1",children:(0,Dg.jsx)("a",{href:n.link,class:"btn btn-primary",children:"BUY NOW"})}),(0,Dg.jsx)("div",{className:"m-1 p-1",children:(0,Dg.jsx)("a",{href:"https://telegram.me/newcouponandcode",class:"btn btn-primary",children:(0,Dg.jsx)("i",{class:"far fa-paper-plane",children:" JOIN US "})})})]})]})})]})})}),(0,Dg.jsxs)("div",{className:"m-2 p-2",children:[(0,Dg.jsx)("h4",{children:" Disclaimer "}),(0,Dg.jsxs)("ul",{children:[(0,Dg.jsx)("li",{children:(0,Dg.jsx)("b",{children:'Due to "different sellers" or "offer ended," you could occasionally encounter variations in product prices.'})}),(0,Dg.jsx)("li",{children:(0,Dg.jsx)("b",{children:"As of the date/time specified above, the product prices and availability were correct, but they are liable to change. This product can be purchased using any pricing and availability details that are listed on the merchant's website at the time of purchase."})}),(0,Dg.jsx)("li",{children:(0,Dg.jsxs)("b",{children:["The quality, usability, safety, morality, or legality of any component of the items advertised, the truth or correctness of the listings, or the capacity of sellers to sell items or respect their coupon or promotion are all things that"," ",(0,Dg.jsx)("a",{href:"https://couponsandoffer.in",children:"couponsandoffer.in"})," ","has no control over and does not guarantee or warrant."]})})]})]})]})})},Kg=function(){return(0,Dg.jsxs)("header",{children:[(0,Dg.jsx)("nav",{className:"navbar fixed-top navbar-expand-lg navbar-light bg-white",children:(0,Dg.jsxs)("div",{className:"container-fluid",children:[(0,Dg.jsx)("button",{className:"navbar-toggler",type:"button","data-mdb-toggle":"collapse","data-mdb-target":"#navbarExample01","aria-controls":"navbarExample01","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,Dg.jsx)("i",{className:"fas fa-bars"})}),(0,Dg.jsx)("div",{className:"collapse navbar-collapse",id:"navbarExample01",children:(0,Dg.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[(0,Dg.jsx)("li",{className:"nav-item active",children:(0,Dg.jsx)(Q,{className:"nav-link","aria-current":"page",to:"/",children:"Home"})}),(0,Dg.jsx)("li",{className:"nav-item",children:(0,Dg.jsx)(Q,{className:"nav-link",to:"/about",children:"About"})})]})})]})}),(0,Dg.jsx)("div",{className:"m-5 p-5 text-center bg-light",children:(0,Dg.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,Dg.jsx)("div",{className:"d-flex  align-items-end",children:(0,Dg.jsx)("i",{class:"fas fa-shopping-bag fa-3x"})}),(0,Dg.jsxs)("div",{children:[(0,Dg.jsx)("h1",{className:"mb-3",children:"Coupons and Offers"}),(0,Dg.jsx)("h4",{className:"mb-3",children:"Today's DEAL !!"})]}),(0,Dg.jsx)("div",{className:"d-flex align-items-end",children:(0,Dg.jsx)("i",{class:"fas fa-cart-arrow-down fa-3x"})})]})})]})},Gg=function(){return(0,Dg.jsx)("div",{children:(0,Dg.jsx)("footer",{class:"bg-light  text-center text-lg-start",children:(0,Dg.jsxs)("div",{class:"text-center p-3",style:{backgroundColor:"rgba(0, 0, 0, 0.2)"},children:["\xa9 2020 Copyright:",(0,Dg.jsx)("a",{class:"text-dark",href:"/",children:"CouponsandOffers"})]})})})},Wg=n(248),Hg=function(){return(0,Dg.jsx)("div",{className:"m-2 p-2",children:(0,Dg.jsxs)("div",{className:"row",children:[(0,Dg.jsxs)("div",{className:"col-md-8",children:[(0,Dg.jsx)("h1",{className:" display-4 text-center",children:" Our Goal "}),(0,Dg.jsxs)("p",{className:"lead",children:["To give the most efficient and proven offers data to make eshoppers' lives easier and to assist them buy for less."," ",(0,Dg.jsx)("b",{children:"couponsandoffers"})," is a website that provides useful offers, coupons, and deals, as the name suggests. The key job in this e-commerce era is to identify effective offers with least effort. Our primary goal is to give shoppers with better and more efficient deals, and we are working hard to achieve this. We've tried to cater as many ecommerce brad Offers, discounts, and deals as possible in order to achieve the aforementioned objectives. We have 1500+ offers from prominent stores like Amazon, Flipkart, Snapdeal, Paytm, and Ebay as part of our ongoing efforts."]}),(0,Dg.jsx)("p",{className:"text-muted",children:"What are our options? We take the greatest offers, promo codes, and coupon codes, verify them, and then list them for you. We always aim to discover the most up-to-date and reliable discounts, with no extraneous information or bloat, simply basic and straightforward offers to utilise in the following categories. Recharge coupons, food discounts, free charge coupons, hotel booking discounts, flight booking discounts, and much more are all available."}),(0,Dg.jsx)("p",{className:"text-muted",children:"Only the best coupons, deals, and offers will be provided. We Despise Spam Just Like You Do! Our goal is to deliver offers and coupons in such a nice and smooth style, with a seamless app and online experience, that you will be glad to visit our platform without any spams or excessive details, just simple details that users can comprehend and utilise in their everyday lives. Our Offers Coupons & Deals programme assists you in locating the finest online store deals."})]}),(0,Dg.jsx)("div",{className:"col-md-4 d-flex align-items-center",children:(0,Dg.jsx)("div",{className:"bg-image hover-zoom",children:(0,Dg.jsx)("img",{src:Wg,alt:"couponsandoffer",className:"img-fluid rounded"})})})]})})};var Qg=function(){return(0,Dg.jsxs)(H,{children:[(0,Dg.jsx)(Kg,{}),(0,Dg.jsxs)(S,{children:[(0,Dg.jsx)(x,{path:"/",element:(0,Dg.jsx)(qg,{})}),(0,Dg.jsx)(x,{path:"/addoffer",element:(0,Dg.jsx)(Ag,{})}),(0,Dg.jsx)(x,{path:"/about",element:(0,Dg.jsx)(Hg,{})}),(0,Dg.jsx)(x,{path:"/product/:id",element:(0,Dg.jsx)(zg,{})}),(0,Dg.jsx)(x,{path:"*",element:(0,Dg.jsx)(qg,{})})]}),(0,Dg.jsx)(Gg,{})]})},Yg=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.render((0,Dg.jsx)(r.StrictMode,{children:(0,Dg.jsx)(Qg,{})}),document.getElementById("root")),Yg()}()}();
//# sourceMappingURL=main.dde57b83.js.map